var Ci=Object.defineProperty;var Pi=(e,t,n)=>t in e?Ci(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var C=(e,t,n)=>(Pi(e,typeof t!="symbol"?t+"":t,n),n);var bt=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)};var pe,x,fn,X,xt,mn,Be,pn,ue={},_n=[],Di=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ce=Array.isArray;function K(e,t){for(var n in t)e[n]=t[n];return e}function gn(e){var t=e.parentNode;t&&t.removeChild(e)}function Se(e,t,n){var r,a,s,c={};for(s in t)s=="key"?r=t[s]:s=="ref"?a=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?pe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return de(e,c,r,a,null)}function de(e,t,n,r,a){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++fn,__i:-1,__u:0};return a==null&&x.vnode!=null&&x.vnode(s),s}function N(e){return e.children}function Q(e,t){this.props=e,this.context=t}function se(e,t){if(t==null)return e.__?se(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?se(e):null}function yn(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return yn(e)}}function ze(e){(!e.__d&&(e.__d=!0)&&X.push(e)&&!Ee.__r++||xt!==x.debounceRendering)&&((xt=x.debounceRendering)||mn)(Ee)}function Ee(){var e,t,n,r,a,s,c,d,o;for(X.sort(Be);e=X.shift();)e.__d&&(t=X.length,r=void 0,s=(a=(n=e).__v).__e,d=[],o=[],(c=n.__P)&&((r=K({},a)).__v=a.__v+1,x.vnode&&x.vnode(r),Xe(c,r,a,n.__n,c.ownerSVGElement!==void 0,32&a.__u?[s]:null,d,s??se(a),!!(32&a.__u),o),r.__.__k[r.__i]=r,xn(d,r,o),r.__e!=s&&yn(r)),X.length>t&&X.sort(Be));Ee.__r=0}function vn(e,t,n,r,a,s,c,d,o,l,f){var u,m,h,_,y,S=r&&r.__k||_n,p=t.length;for(n.__d=o,Ai(n,t,S),o=n.__d,u=0;u<p;u++)(h=n.__k[u])!=null&&typeof h!="boolean"&&typeof h!="function"&&(m=h.__i===-1?ue:S[h.__i]||ue,h.__i=u,Xe(e,h,m,a,s,c,d,o,l,f),_=h.__e,h.ref&&m.ref!=h.ref&&(m.ref&&et(m.ref,null,h),f.push(h.ref,h.__c||_,h)),y==null&&_!=null&&(y=_),65536&h.__u||m.__k===h.__k?o=bn(h,o,e):typeof h.type=="function"&&h.__d!==void 0?o=h.__d:_&&(o=_.nextSibling),h.__d=void 0,h.__u&=-196609);n.__d=o,n.__e=y}function Ai(e,t,n){var r,a,s,c,d,o=t.length,l=n.length,f=l,u=0;for(e.__k=[],r=0;r<o;r++)(a=e.__k[r]=(a=t[r])==null||typeof a=="boolean"||typeof a=="function"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?de(null,a,null,null,a):Ce(a)?de(N,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?de(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null?(a.__=e,a.__b=e.__b+1,d=Li(a,n,c=r+u,f),a.__i=d,s=null,d!==-1&&(f--,(s=n[d])&&(s.__u|=131072)),s==null||s.__v===null?(d==-1&&u--,typeof a.type!="function"&&(a.__u|=65536)):d!==c&&(d===c+1?u++:d>c?f>o-c?u+=d-c:u--:u=d<c&&d==c-1?d-c:0,d!==r+u&&(a.__u|=65536))):(s=n[r])&&s.key==null&&s.__e&&(s.__e==e.__d&&(e.__d=se(s)),He(s,s,!1),n[r]=null,f--);if(f)for(r=0;r<l;r++)(s=n[r])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=se(s)),He(s,s))}function bn(e,t,n){var r,a;if(typeof e.type=="function"){for(r=e.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=e,t=bn(r[a],t,n));return t}return e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function J(e,t){return t=t||[],e==null||typeof e=="boolean"||(Ce(e)?e.some(function(n){J(n,t)}):t.push(e)),t}function Li(e,t,n,r){var a=e.key,s=e.type,c=n-1,d=n+1,o=t[n];if(o===null||o&&a==o.key&&s===o.type)return n;if(r>(o!=null&&!(131072&o.__u)?1:0))for(;c>=0||d<t.length;){if(c>=0){if((o=t[c])&&!(131072&o.__u)&&a==o.key&&s===o.type)return c;c--}if(d<t.length){if((o=t[d])&&!(131072&o.__u)&&a==o.key&&s===o.type)return d;d++}}return-1}function wt(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Di.test(t)?n:n+"px"}function ge(e,t,n,r,a){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||wt(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||wt(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?Nt:kt,s)):e.removeEventListener(t,s?Nt:kt,s);else{if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function kt(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(x.event?x.event(e):e)}function Nt(e){return this.l[e.type+!0](x.event?x.event(e):e)}function Xe(e,t,n,r,a,s,c,d,o,l){var f,u,m,h,_,y,S,p,k,E,g,w,b,v,T,A=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(o=!!(32&n.__u),s=[d=t.__e=n.__e]),(f=x.__b)&&f(t);e:if(typeof A=="function")try{if(p=t.props,k=(f=A.contextType)&&r[f.__c],E=f?k?k.props.value:f.__:r,n.__c?S=(u=t.__c=n.__c).__=u.__E:("prototype"in A&&A.prototype.render?t.__c=u=new A(p,E):(t.__c=u=new Q(p,E),u.constructor=A,u.render=$i),k&&k.sub(u),u.props=p,u.state||(u.state={}),u.context=E,u.__n=r,m=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),A.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=K({},u.__s)),K(u.__s,A.getDerivedStateFromProps(p,u.__s))),h=u.props,_=u.state,u.__v=t,m)A.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(A.getDerivedStateFromProps==null&&p!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(p,E),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(p,u.__s,E)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=p,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(Z){Z&&(Z.__=t)}),g=0;g<u._sb.length;g++)u.__h.push(u._sb[g]);u._sb=[],u.__h.length&&c.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(p,u.__s,E),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,_,y)})}if(u.context=E,u.props=p,u.__P=e,u.__e=!1,w=x.__r,b=0,"prototype"in A&&A.prototype.render){for(u.state=u.__s,u.__d=!1,w&&w(t),f=u.render(u.props,u.state,u.context),v=0;v<u._sb.length;v++)u.__h.push(u._sb[v]);u._sb=[]}else do u.__d=!1,w&&w(t),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++b<25);u.state=u.__s,u.getChildContext!=null&&(r=K(K({},r),u.getChildContext())),m||u.getSnapshotBeforeUpdate==null||(y=u.getSnapshotBeforeUpdate(h,_)),vn(e,Ce(T=f!=null&&f.type===N&&f.key==null?f.props.children:f)?T:[T],t,n,r,a,s,c,d,o,l),u.base=t.__e,t.__u&=-161,u.__h.length&&c.push(u),S&&(u.__E=u.__=null)}catch(Z){t.__v=null,o||s!=null?(t.__e=d,t.__u|=o?160:32,s[s.indexOf(d)]=null):(t.__e=n.__e,t.__k=n.__k),x.__e(Z,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Ri(n.__e,t,n,r,a,s,c,o,l);(f=x.diffed)&&f(t)}function xn(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)et(n[r],n[++r],n[++r]);x.__c&&x.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(s){s.call(a)})}catch(s){x.__e(s,a.__v)}})}function Ri(e,t,n,r,a,s,c,d,o){var l,f,u,m,h,_,y,S=n.props,p=t.props,k=t.type;if(k==="svg"&&(a=!0),s!=null){for(l=0;l<s.length;l++)if((h=s[l])&&"setAttribute"in h==!!k&&(k?h.localName===k:h.nodeType===3)){e=h,s[l]=null;break}}if(e==null){if(k===null)return document.createTextNode(p);e=a?document.createElementNS("http://www.w3.org/2000/svg",k):document.createElement(k,p.is&&p),s=null,d=!1}if(k===null)S===p||d&&e.data===p||(e.data=p);else{if(s=s&&pe.call(e.childNodes),S=n.props||ue,!d&&s!=null)for(S={},l=0;l<e.attributes.length;l++)S[(h=e.attributes[l]).name]=h.value;for(l in S)h=S[l],l=="children"||(l=="dangerouslySetInnerHTML"?u=h:l==="key"||l in p||ge(e,l,null,h,a));for(l in p)h=p[l],l=="children"?m=h:l=="dangerouslySetInnerHTML"?f=h:l=="value"?_=h:l=="checked"?y=h:l==="key"||d&&typeof h!="function"||S[l]===h||ge(e,l,h,S[l],a);if(f)d||u&&(f.__html===u.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(u&&(e.innerHTML=""),vn(e,Ce(m)?m:[m],t,n,r,a&&k!=="foreignObject",s,c,s?s[0]:n.__k&&se(n,0),d,o),s!=null)for(l=s.length;l--;)s[l]!=null&&gn(s[l]);d||(l="value",_!==void 0&&(_!==e[l]||k==="progress"&&!_||k==="option"&&_!==S[l])&&ge(e,l,_,S[l],!1),l="checked",y!==void 0&&y!==e[l]&&ge(e,l,y,S[l],!1))}return e}function et(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){x.__e(r,n)}}function He(e,t,n){var r,a;if(x.unmount&&x.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||et(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){x.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&He(r[a],t,n||typeof e.type!="function");n||e.__e==null||gn(e.__e),e.__=e.__e=e.__d=void 0}function $i(e,t,n){return this.constructor(e,n)}function wn(e,t,n){var r,a,s,c;x.__&&x.__(e,t),a=(r=typeof n=="function")?null:n&&n.__k||t.__k,s=[],c=[],Xe(t,e=(!r&&n||t).__k=Se(N,null,[e]),a||ue,ue,t.ownerSVGElement!==void 0,!r&&n?[n]:a?null:t.firstChild?pe.call(t.childNodes):null,s,!r&&n?n:a?a.__e:t.firstChild,r,c),xn(s,e,c)}function Mi(e,t,n){var r,a,s,c,d=K({},e.props);for(s in e.type&&e.type.defaultProps&&(c=e.type.defaultProps),t)s=="key"?r=t[s]:s=="ref"?a=t[s]:d[s]=t[s]===void 0&&c!==void 0?c[s]:t[s];return arguments.length>2&&(d.children=arguments.length>3?pe.call(arguments,2):n),de(e.type,d,r||e.key,a||e.ref,null)}function G(e,t){var n={__c:t="__cC"+pn++,__:e,Consumer:function(r,a){return r.children(a)},Provider:function(r){var a,s;return this.getChildContext||(a=[],(s={})[t]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&a.some(function(d){d.__e=!0,ze(d)})},this.sub=function(c){a.push(c);var d=c.componentWillUnmount;c.componentWillUnmount=function(){a.splice(a.indexOf(c),1),d&&d.call(c)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}pe=_n.slice,x={__e:function(e,t,n,r){for(var a,s,c;t=t.__;)if((a=t.__c)&&!a.__)try{if((s=a.constructor)&&s.getDerivedStateFromError!=null&&(a.setState(s.getDerivedStateFromError(e)),c=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,r||{}),c=a.__d),c)return a.__E=a}catch(d){e=d}throw e}},fn=0,Q.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=K({},this.state),typeof e=="function"&&(e=e(K({},n),this.props)),e&&K(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),ze(this))},Q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),ze(this))},Q.prototype.render=N,X=[],mn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Be=function(e,t){return e.__v.__b-t.__v.__b},Ee.__r=0,pn=0;var ee,L,$e,St,he=0,kn=[],xe=[],Et=x.__b,It=x.__r,Tt=x.diffed,Ct=x.__c,Pt=x.unmount;function _e(e,t){x.__h&&x.__h(L,e,he||t),he=0;var n=L.__H||(L.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:xe}),n.__[e]}function I(e){return he=1,Oi(Nn,e)}function Oi(e,t,n){var r=_e(ee++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Nn(void 0,t),function(d){var o=r.__N?r.__N[0]:r.__[0],l=r.t(o,d);o!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=L,!L.u)){var a=function(d,o,l){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(m){return m.__c});if(f.every(function(m){return!m.__N}))return!s||s.call(this,d,o,l);var u=!1;return f.forEach(function(m){if(m.__N){var h=m.__[0];m.__=m.__N,m.__N=void 0,h!==m.__[0]&&(u=!0)}}),!(!u&&r.__c.props===d)&&(!s||s.call(this,d,o,l))};L.u=!0;var s=L.shouldComponentUpdate,c=L.componentWillUpdate;L.componentWillUpdate=function(d,o,l){if(this.__e){var f=s;s=void 0,a(d,o,l),s=f}c&&c.call(this,d,o,l)},L.shouldComponentUpdate=a}return r.__N||r.__}function D(e,t){var n=_e(ee++,3);!x.__s&&it(n.__H,t)&&(n.__=e,n.i=t,L.__H.__h.push(n))}function tt(e,t){var n=_e(ee++,4);!x.__s&&it(n.__H,t)&&(n.__=e,n.i=t,L.__h.push(n))}function V(e){return he=5,nt(function(){return{current:e}},[])}function nt(e,t){var n=_e(ee++,7);return it(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function W(e,t){return he=8,nt(function(){return e},t)}function U(e){var t=L.context[e.__c],n=_e(ee++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(L)),t.props.value):e.__}function Gi(){for(var e;e=kn.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(we),e.__H.__h.forEach(We),e.__H.__h=[]}catch(t){e.__H.__h=[],x.__e(t,e.__v)}}x.__b=function(e){L=null,Et&&Et(e)},x.__r=function(e){It&&It(e),ee=0;var t=(L=e.__c).__H;t&&($e===L?(t.__h=[],L.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=xe,n.__N=n.i=void 0})):(t.__h.forEach(we),t.__h.forEach(We),t.__h=[],ee=0)),$e=L},x.diffed=function(e){Tt&&Tt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(kn.push(t)!==1&&St===x.requestAnimationFrame||((St=x.requestAnimationFrame)||Ui)(Gi)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==xe&&(n.__=n.__V),n.i=void 0,n.__V=xe})),$e=L=null},x.__c=function(e,t){t.some(function(n){try{n.__h.forEach(we),n.__h=n.__h.filter(function(r){return!r.__||We(r)})}catch(r){t.some(function(a){a.__h&&(a.__h=[])}),t=[],x.__e(r,n.__v)}}),Ct&&Ct(e,t)},x.unmount=function(e){Pt&&Pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{we(r)}catch(a){t=a}}),n.__H=void 0,t&&x.__e(t,n.__v))};var Dt=typeof requestAnimationFrame=="function";function Ui(e){var t,n=function(){clearTimeout(r),Dt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Dt&&(t=requestAnimationFrame(n))}function we(e){var t=L,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),L=t}function We(e){var t=L;e.__c=e.__(),L=t}function it(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Nn(e,t){return typeof t=="function"?t(e):t}function Bi(e,t){for(var n in t)e[n]=t[n];return e}function At(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Lt(e){this.props=e}(Lt.prototype=new Q).isPureReactComponent=!0,Lt.prototype.shouldComponentUpdate=function(e,t){return At(this.props,e)||At(this.state,t)};var Rt=x.__b;x.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Rt&&Rt(e)};var $t=function(e,t){return e==null?null:J(J(e).map(t))},zi={map:$t,forEach:$t,count:function(e){return e?J(e).length:0},only:function(e){var t=J(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:J},Hi=x.__e;x.__e=function(e,t,n,r){if(e.then){for(var a,s=t;s=s.__;)if((a=s.__c)&&a.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t)}Hi(e,t,n,r)};var Mt=x.unmount;function Sn(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=Bi({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return Sn(r,t,n)})),e}function En(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return En(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Me(){this.__u=0,this.t=null,this.__b=null}function In(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function ye(){this.u=null,this.o=null}x.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Mt&&Mt(e)},(Me.prototype=new Q).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var a=In(r.__v),s=!1,c=function(){s||(s=!0,n.__R=null,a?a(d):d())};n.__R=c;var d=function(){if(!--r.__u){if(r.state.__a){var o=r.state.__a;r.__v.__k[0]=En(o,o.__c.__P,o.__c.__O)}var l;for(r.setState({__a:r.__b=null});l=r.t.pop();)l.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(c,c)},Me.prototype.componentWillUnmount=function(){this.t=[]},Me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Sn(this.__b,n,r.__O=r.__P)}this.__b=null}var a=t.__a&&Se(N,null,e.fallback);return a&&(a.__u&=-33),[Se(N,null,t.__a?null:e.children),a]};var Ot=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};(ye.prototype=new Q).__a=function(e){var t=this,n=In(t.__v),r=t.o.get(e);return r[0]++,function(a){var s=function(){t.props.revealOrder?(r.push(a),Ot(t,e,r)):a()};n?n(s):s()}},ye.prototype.render=function(e){this.u=null,this.o=new Map;var t=J(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ye.prototype.componentDidUpdate=ye.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Ot(e,n,t)})};var Tn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Wi=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Fi=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Vi=/[A-Z0-9]/g,ji=typeof document<"u",Yi=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Ki(e,t,n){return t.__k==null&&(t.textContent=""),wn(e,t),typeof n=="function"&&n(),e?e.__c:null}Q.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Q.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Gt=x.event;function Qi(){}function Ji(){return this.cancelBubble}function qi(){return this.defaultPrevented}x.event=function(e){return Gt&&(e=Gt(e)),e.persist=Qi,e.isPropagationStopped=Ji,e.isDefaultPrevented=qi,e.nativeEvent=e};var Zi={enumerable:!1,configurable:!0,get:function(){return this.class}},Ut=x.vnode;x.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,a={};for(var s in n){var c=n[s];if(!(s==="value"&&"defaultValue"in n&&c==null||ji&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var d=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&c===!0?c="":d==="ondoubleclick"?s="ondblclick":d!=="onchange"||r!=="input"&&r!=="textarea"||Yi(n.type)?d==="onfocus"?s="onfocusin":d==="onblur"?s="onfocusout":Fi.test(s)?s=d:r.indexOf("-")===-1&&Wi.test(s)?s=s.replace(Vi,"-$&").toLowerCase():c===null&&(c=void 0):d=s="oninput",d==="oninput"&&a[s=d]&&(s="oninputCapture"),a[s]=c}}r=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=J(n.children).forEach(function(o){o.props.selected=a.value.indexOf(o.props.value)!=-1})),r=="select"&&a.defaultValue!=null&&(a.value=J(n.children).forEach(function(o){o.props.selected=a.multiple?a.defaultValue.indexOf(o.props.value)!=-1:a.defaultValue==o.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",Zi)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),t.props=a}(e),e.$$typeof=Tn,Ut&&Ut(e)};var Bt=x.__r;x.__r=function(e){Bt&&Bt(e),e.__c};var zt=x.diffed;x.diffed=function(e){zt&&zt(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function Cn(e){return!!e&&e.$$typeof===Tn}function Xi(e){return Cn(e)?Mi.apply(null,arguments):e}function er(e){return!!e.__k&&(wn(null,e),!0)}var tr=0;function i(e,t,n,r,a,s){var c,d,o={};for(d in t)d=="ref"?c=t[d]:o[d]=t[d];var l={type:e,props:o,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--tr,__i:-1,__u:0,__source:a,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(d in c)o[d]===void 0&&(o[d]=c[d]);return x.vnode&&x.vnode(l),l}function nr(e){return{render(t){Ki(t,e)},unmount(){er(e)}}}let Pn="America/New_York";function ir(e){Pn=e}function P(e){e=new Date(e||Date.now());const t={},n="2-digit";return Intl.DateTimeFormat("en-US",{timeZone:Pn,hourCycle:"h23",year:"numeric",month:n,day:n,hour:n,minute:n,second:n}).formatToParts(e).forEach(r=>t[r.type]=r.value),{date:`${t.year}-${t.month}-${t.day}`,time:`${t.hour}:${t.minute}:${t.second}`}}function rr(){const e=P();if(e.time>"03:00:00")return e.date;const t=new Date;return t.setDate(t.getDate()-1),P(t).date}function sr(e){const t=new Date(e+"T00:00:00"),n=t.toLocaleString("en-US",{month:"long",day:"numeric"}),r=P().date;if(e===r)return`Today, ${n}`;const a=new Date(r);a.setDate(a.getDate()+1);const s=a.toISOString().split("T")[0];return e===s?`Tomorrow, ${n}`:`${t.toLocaleString("en-US",{weekday:"long"})}, ${n}`}function j(e){const t=e.split(":").slice(0,2).map(Number),n=t[0]>=12?"PM":"AM";return t[0]=t[0]%12||12,t.map(r=>String(r).padStart(2,"0")).join(":").replace(/^0/,"")+" "+n}function Fe(e){const[t,n]=e.slice(0,19).split("T");return{date:t,time:n}}function Ie(e){const[t,n]=e.split(":").map(Number);return(t+17)%24*60+n}class Dn extends Error{constructor(n){super(`Auth data "${n}" missing or expired`);C(this,"name","ReauthNeeded")}}class ar{constructor(t,n=localStorage){C(this,"storageKey");C(this,"storage");C(this,"onUnauthorized",()=>{});this.storageKey=t,this.storage=n}getData(){try{const t=this.storage.getItem(this.storageKey);if(t){const{swid:n,accessToken:r,expires:a}=JSON.parse(t),s=P(new Date(a)),c=P();if(s.date>c.date||s.date===c.date&&s.time>c.time&&s.time>="17")return{swid:n,accessToken:r}}}catch(t){console.error(t)}throw this.deleteData(),new Dn(this.storageKey)}setData(t){this.storage.setItem(this.storageKey,JSON.stringify(t))}deleteData(){this.storage.removeItem(this.storageKey),setTimeout(this.onUnauthorized)}}const or=8e3;async function rt(e,t={}){const{params:n,data:r,timeout:a=or,...s}=t;t=s,t.referrer||(t.referrer=""),t.credentials||(t.credentials="omit"),t.cache||(t.cache="no-store"),t.headers={...t.headers||{}},n&&Object.keys(n).length>0&&(e+=(e.includes("?")?"&":"?")+Object.entries(n).filter(([,l])=>l!=="").map(l=>l.map(encodeURIComponent).join("=")).join("&")),r&&(t.method||(t.method="POST"),t.headers={...t.headers,"Content-Type":"application/json"},t.body=JSON.stringify(r)),t.method||(t.method="GET");const c=new AbortController;t.signal=c.signal;const d=setTimeout(()=>c.abort(),a);let o;try{o=await fetch(e,t)}catch(l){return console.error(l),{ok:!1,status:0,data:null}}finally{clearTimeout(d)}return{ok:o.ok,status:o.status,data:(o.headers.get("Content-Type")||"").startsWith("application/json")?await o.json():{}}}class An extends Error{constructor(){super(...arguments);C(this,"name","InvalidOrigin")}}class le extends Error{constructor(n,r="Request failed"){super(`${r}: ${JSON.stringify(n)}`);C(this,"response");C(this,"name","RequestError");this.response=n}}class Pe{constructor(t,n){C(this,"data");C(this,"authStore");C(this,"origin");this.data=t,this.origin=this.constructor.origins[this.data.resort],this.authStore=n}static originToResort(t){var a;const r=(a=Object.entries(this.origins).find(([,s])=>s===t))==null?void 0:a[0];if(r)return r;throw new An(t)}logOut(){this.authStore.deleteData()}async request(t){const{swid:n,accessToken:r}=this.authStore.getData(),a=this.origin+t.path,s=await rt(a,{method:t.method,params:t.params,data:t.data,headers:{"Accept-Language":"en-US",Authorization:`BEARER ${r}`,"x-user-id":n}});if(s.status===401&&!t.ignoreUnauth)setTimeout(()=>this.authStore.deleteData());else{const{key:c}=t;if(s.ok&&(!c||s.data[c]))return{...s,data:c?s.data[c]:s.data}}throw new le(s)}}C(Pe,"origins",{WDW:"https://disneyworld.disney.go.com",DLR:"https://disneyland.disney.go.com"});const cr={48199:"Mr-Incredible",48200:"Mrs-Incredible",261227:"Nemo",339625:"Russell",339626:"Carl",364907:"Jack-Skellington",431014:"Princess-Tiana",431065:"Darth_Vader",15549505:"Rapunzel",15655408:"Default_SignedIn",15675686:"Crush",15831168:"Wall-E",16453979:"Merida",16726412:"Stormtrooper",16818199:"Violet",16869301:"Jack-Jack",17345357:"R2-D2",17345359:"C-3PO",17532220:"Bruce",17532224:"Green-Alien",17532227:"Kermit",17532228:"Sorcerer-Mickey",17577168:"Elsa",17577169:"Anna",17813977:"Olaf",17888784:"Yoda",18101167:"Captain-Mickey",18368743:"-Nick",18368747:"-Judy",18393706:"-Flash",18403761:"kion",18405224:"-Moana",18405236:"-Elena",19633995:"50th_Mickey",19633996:"50th_Minnie",90003819:"Alice",90003846:"Ariel",90003898:"Belle",90003967:"Buzz",90003976:"Captain-Hook",90004004:"Chesire-Cat",90004017:"Cinderella",90004068:"Daisy",90004076:"Dash",90004104:"Donald",90004228:"Goofy",90004260:"Hamm",90004328:"Princess-Jasmine",90004340:"Jiminy",90004395:"Lady",90004482:"Mickey-Mouse",90004486:"Minnie",90004537:"Mulan",90004605:"Peter-Pan",90004625:"Pluto",90004626:"Pocahontas",90004642:"Princess-Aurora",90004682:"Rex",90004772:"Snow-White",90004778:"Sparky",90004846:"TinkerBell",90004860:"Tramp",90004939:"Zero"},st="https://cdn1.parksmedia.wdprapps.disney.com/resize/mwImage/1/90/90/75/dam/",lr=st+"wdpro-assets/avatars/180x180/RetAvatar_180x180_",dr=st+"wdpro-assets/avatars/180x180/RetAvatar-180x180",ur=st+"disney-world/50th-anniversary/avatars/RetAvatar_180x180_",hr={"-":dr,5:ur};function ke(e){const t=cr[e||""];if(t)return(hr[t[0]]||lr)+t+".png"}const ie=e=>`/das-vas/api/v1/${e}`;function fr(e){return{id:e.id,name:e.name.replace(/ \(Me\)$/,""),avatarImageUrl:ke(e.characterId),primary:e.primary}}class Ve extends Error{constructor(n){super();C(this,"conflicts");C(this,"name","ConflictsError");this.conflicts=n}}class mr extends Error{constructor(){super(...arguments);C(this,"name","NoPrimaryGuest")}}class Ln extends Error{constructor(){super(...arguments);C(this,"name","ExperienceUnavailable")}}var Ze;class pr extends Pe{constructor(){super(...arguments);C(this,"bookingGuestId");bt(this,Ze,void 0)}async experiences(n){const r=encodeURIComponent(n.id),{data:a}=await this.request({path:ie(`availability/parks/${r}/experiences`),key:"experiences"});return a.filter(s=>s.available&&!!s.nextAvailableTime).map(s=>({...s,...this.data.experiences[s.id]})).sort((s,c)=>s.name.localeCompare(c.name))}async parties(){const{swid:n}=this.authStore.getData(),{data:{bookingGuestId:r,parties:a}}=await this.request({path:ie(`users/${encodeURIComponent(n)}/parties`)});return this.bookingGuestId=r,a.map(s=>[{...s.primaryGuest,primary:!0},...s.linkedGuests].map(fr))}async book({park:n,experience:r,guests:a}){var u,m;const s=await this.eligibility({park:n,experience:r,guests:a}),c=new Set((u=s.find(({type:h})=>h==="ELIGIBLE"))==null?void 0:u.guestIds);if(!a.every(h=>c.has(h.id)))throw new Ve(Object.fromEntries(s.filter(h=>h.type!=="ELIGIBLE").flatMap(h=>h.guestIds.map(_=>[_,h.type]))));const d=await this.availability({park:n,experience:r}),o=(m=a.find(h=>h.primary))==null?void 0:m.id,l=new Map(a.map(h=>[h.id,h])),{data:f}=await this.request({path:ie("bookings"),key:"booking",data:{bookingGuestId:this.bookingGuestId,primaryGuestId:o,guestIds:a.map(h=>h.id),experienceId:r.id,startTime:d}});return{type:"DAS",subtype:"IN_PARK",id:r.id,name:r.name,park:n,guests:f.entitlements.map(h=>{const _=l.get(h.guestId);return{id:h.guestId,name:(_==null?void 0:_.name)??"",avatarImageUrl:_==null?void 0:_.avatarImageUrl,entitlementId:h.id}}),start:Fe(f.startDateTime),end:{},bookingId:f.id}}async cancelBooking(n){const a=n.map(s=>s.entitlementId).map(encodeURIComponent).join(",");await this.request({path:ie(`entitlements/${a}`),method:"DELETE"})}async eligibility({park:n,experience:r,guests:a}={}){const s=a.find(d=>!!d.primary);if(!s)throw new mr;const{data:c}=await this.request({path:ie("eligibility"),params:{experienceId:r.id,parkId:n.id,primaryGuestId:s.id,guestIds:a.map(d=>d.id).join(",")},key:"eligibility"});return c}async availability({park:n,experience:r}){const a=encodeURIComponent(r.id),s=encodeURIComponent(n.id),{data:{available:c,nextAvailableTime:d}}=await this.request({path:ie(`availability/parks/${s}/experiences/${a}`),key:"experience"});if(!c||!d)throw new Ln;return d}}Ze=new WeakMap;const _r="modulepreload",gr=function(e){return"/bg1/"+e},Ht={},Te=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=gr(s),s in Ht)return;Ht[s]=!0;const c=s.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const u=a[f];if(u.href===s&&(!c||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${d}`))return;const l=document.createElement("link");if(l.rel=c?"stylesheet":_r,c||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),c)return new Promise((f,u)=>{l.addEventListener("load",f),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s})},yr=(e,t)=>{const n=e[t];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,a)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function vr(e){return{resort:e,...await yr(Object.assign({"./data/dlr.ts":()=>Te(()=>import("./dlr.js"),[]),"./data/wdw.ts":()=>Te(()=>import("./wdw.js"),[])}),`./data/${e.toLowerCase()}.ts`)}}const br={WDW:"wdw-itinerary-api",DLR:"dlr-itinerary-web-api"},xr={WDW:{experience:"80010110",park:"80007944"},DLR:{experience:"353295",park:"330339"}},wr=new Set(["ACTIVITY","DINING"]),oe=e=>e.split(";")[0];function Rn(e){const{date:t,time:n}=P();return e.modifiable&&t===e.end.date&&n<=(e.end.time??"")}class kr extends Error{constructor(){super(...arguments);C(this,"name","ModifyNotAllowed")}}function Wt(e){if(e&&!Rn(e))throw new kr}class Ft extends Pe{constructor(n,r,a){super(n,r);C(this,"maxPartySize",12);C(this,"nextBookTime");C(this,"onUnauthorized",()=>{});C(this,"partyIds",new Set);C(this,"guestCache",new Map);C(this,"tracker");C(this,"primaryGuestId","");C(this,"convertGuest",n=>{const{id:r,firstName:a,lastName:s,characterId:c,...d}=n,o=`${a} ${s}`.trim();if(!this.guestCache.has(r))switch(n.ineligibleReason){case"INVALID_PARK_ADMISSION":case"PARK_RESERVATION_NEEDED":case"GENIE_PLUS_NEEDED":n.primary&&this.cacheGuest(r,o,c);break;default:this.cacheGuest(r,o,c)}const l=ke(c);return this.partyIds.size>0&&!this.partyIds.has(r)&&(d.ineligibleReason="NOT_IN_PARTY",delete d.eligibleAfter),{...d,id:r,name:o,avatarImageUrl:l}});this.tracker=a??new Nr}setPartyIds(n){this.partyIds=new Set(n)}async experiences(n){var s,c,d,o;await this.primeGuestCache();const{data:r}=await this.request({path:`/tipboard-vas/api/v2/parks/${encodeURIComponent(n.id)}/experiences`,params:{eligibilityGuestIds:[...this.guestCache.keys()].join(",")}});this.nextBookTime=(o=(((d=(c=(s=r.eligibility)==null?void 0:s.geniePlusEligibility)==null?void 0:c[rr()])==null?void 0:d.flexEligibilityWindows)||[]).sort((l,f)=>l.time.time.localeCompare(f.time.time))[0])==null?void 0:o.time.time;const{experiences:a=[]}=this.upcomingDrops(n)[0]??{};return r.availableExperiences.filter(l=>{const f=this.data.experiences[l.id];return f?!0:(f!==null&&console.warn(`Missing experience: ${l.id}`),!1)}).map(l=>({...l,...this.data.experiences[l.id],park:n,experienced:this.tracker.experienced(l),drop:!!a.find(({id:f})=>f===l.id)}))}async guests(n){var d;const r=xr[this.data.resort],{data:a}=await this.request({path:"/ea-vas/api/v1/guests",params:{productType:"FLEX",experienceId:(n==null?void 0:n.id)??r.experience,parkId:((d=n==null?void 0:n.park)==null?void 0:d.id)??r.park}});this.primaryGuestId=a.primaryGuestId;const s=a.ineligibleGuests.map(this.convertGuest),c=a.guests.map(this.convertGuest).filter(o=>!("ineligibleReason"in o)||s.push(o)&&!1);return s.sort((o,l)=>{const f=+!o.primary-+!l.primary||o.name.localeCompare(l.name);return o.eligibleAfter||l.eligibleAfter?(o.eligibleAfter||"99").localeCompare(l.eligibleAfter||"99")||f:o.ineligibleReason===l.ineligibleReason?f:o.ineligibleReason==="NOT_IN_PARTY"?1:l.ineligibleReason==="NOT_IN_PARTY"||o.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?-1:l.ineligibleReason==="EXPERIENCE_LIMIT_REACHED"?1:f}),{eligible:c,ineligible:s}}async offer(n,r,a){Wt(a);const{data:{offer:{id:s,date:c,startTime:d,endTime:o,status:l,changeStatus:f},eligibleGuests:u,ineligibleGuests:m}}=await this.request({path:a?"/ea-vas/api/v1/products/modifications/flex/offers":"/ea-vas/api/v2/products/flex/offers",method:"POST",data:{guestIds:((a==null?void 0:a.guests)??r).map(h=>h.id),ineligibleGuests:[],primaryGuestId:r.map(h=>h.id).sort((h,_)=>h.localeCompare(_))[0],parkId:n.park.id,experienceId:n.id,selectedTime:n.flex.nextAvailableTime,...a?{date:P().date,modificationType:n.id===a.id?"TIME":"EXPERIENCE"}:{}},userId:!1});return Te(()=>import("./diu.js"),[]),{id:s,start:{date:c,time:d},end:{date:c,time:o},active:l==="ACTIVE",changed:f!=="NONE",guests:{eligible:(u||[]).map(this.convertGuest),ineligible:(m||[]).map(this.convertGuest)},experience:n}}async book(n,r,a){var h;Wt(r);const s=(await Te(()=>import("./diu.js"),[])).default,c=new Set((a??n.guests.eligible).map(_=>_.id)),{data:d}=await this.request({path:r?"/ea-vas/api/v2/products/modifications/flex/bookings":"/ea-vas/api/v2/products/flex/bookings",method:"POST",userId:!1,data:{offerId:n.id,...await s(n.id),...r?{date:P().date,modificationType:r.id===n.experience.id?"TIME":"EXPERIENCE",existingEntitlements:r.guests.filter(_=>c.has(_.id)).map(_=>({entitlementId:_.entitlementId,entitlementBookingId:_.bookingId})),guestIdsToExclude:r.guests.filter(_=>!c.has(_.id)).map(_=>_.id)}:{}},key:"booking"}),{singleExperienceDetails:{experienceId:o,parkId:l},entitlements:f,startDateTime:u,endDateTime:m}=d;return{type:"LL",subtype:"G+",...this.getExperience(o,l),bookingId:(h=f[0])==null?void 0:h.id,start:Fe(u),end:Fe(m),cancellable:!0,modifiable:!1,guests:f.map(_=>{const y=this.guestCache.get(_.guestId);return{id:_.guestId,name:(y==null?void 0:y.name)||"",avatarImageUrl:ke(y==null?void 0:y.characterId),entitlementId:_.id}})}}async cancelBooking(n){const a=n.map(s=>s.entitlementId).map(encodeURIComponent).join(",");await this.request({path:`/ea-vas/api/v1/entitlements/${a}`,method:"DELETE",userId:!1})}async bookings(){const{swid:n}=this.authStore.getData(),r=P().date,a=br[this.data.resort],{data:{items:s=[],assets:c={},profiles:d={}}}=await this.request({path:`/plan/${a}/api/v1/itinerary-items/${n}?item-types=FASTPASS&item-types=DINING&item-types=ACTIVITY&item-types=VIRTUAL_QUEUE_POSITION`,params:{destination:this.data.resort,fields:"items,profiles,assets","guest-locators":n+";type=swid","guest-locator-groups":"MY_FAMILY","start-date":r,"show-friends":"false"},userId:!1,ignoreUnauth:!0}),o=p=>{const{name:k,avatarId:E,type:g}=d[p.id];return{id:oe(p.id),name:`${k.firstName} ${k.lastName}`.trim(),avatarImageUrl:ke(E),...g==="transactional"&&{transactional:!0}}},l=p=>{const k=c[p.asset],g=c[k.facility].location??"",w=this.getPark(g);w.name===""&&g&&(w.name=c[g].name);const b=new Date(p.startDateTime);return{type:"RES",subtype:p.type,id:oe(p.asset),park:w,name:k.name,start:P(b),guests:p.guests.map(o).sort((T,A)=>+(A.id===this.primaryGuestId)-+(T.id===this.primaryGuestId)||+!A.transactional-+!T.transactional||T.name.localeCompare(A.name)),bookingId:p.id}},f=p=>{const k=c[p.facility],E=new Set;return{...this.getExperience(p.facility,k.location,k.name),start:{date:p.displayStartDate??r,time:p.displayStartTime},end:{date:p.displayEndDate,time:p.displayEndTime},guests:p.guests.filter(g=>E.has(g.id)||g.redemptionsRemaining===0?!1:(E.add(g.id),!0)).map(g=>({...o(g),entitlementId:g.entitlementId,bookingId:g.bookingId,...g.redemptionsRemaining!==void 0&&{redemptions:Math.min(g.redemptionsRemaining,g.redemptionsAllowed??1)}})),bookingId:p.id}},u=p=>{const k={FLEX:"G+",STANDARD:"ILL",OTHER:"OTHER"},E=p.multipleExperiences?"MEP":k[p.kind];if(!E)return;const g=E==="G+";let w={type:"LL",subtype:E,...f(p),cancellable:p.cancellable&&g,modifiable:p.modifiable&&g,bookingId:p.id};if(w.modifiable=Rn(w),p.multipleExperiences){const b=p.assets.find(v=>v.original);b&&(w={...w,...this.getExperience(b.content,c[b.content].location)}),w.choices=p.assets.filter(v=>!v.excluded&&!v.original).map(({content:v})=>{const{name:T,location:A}=c[v];return this.getExperience(v,A,T)}).sort((v,T)=>v.name.localeCompare(T.name))}return w},m=p=>{const E={DAS:"IN_PARK",FDS:"ADVANCE"}[p.kind],g=E==="IN_PARK";return{type:"DAS",subtype:E,cancellable:p.cancellable&&g,...f(p)}},h=p=>{const k=c[p.asset],E=c[k.facility],g=this.getExperience(k.facility,E.location,k.name);return g.park.name===""&&(g.park.name=E.name),{...g,type:"BG",boardingGroup:p.boardingGroup.id,status:p.status,start:P(new Date(p.startDateTime)),guests:p.guests.map(o),bookingId:p.id}},y={PARK_PASS:p=>{const k=this.data.parks.get(oe(c[p.facility].location));if(k)return{type:"APR",id:k.id,name:k.name,park:k,start:P(new Date(p.startDateTime)),guests:p.guests.map(o),bookingId:p.id}},DAS:m,FDS:m},S=s.map(p=>{try{if(p.type==="FASTPASS")return(y[p.kind]??u)(p);if(p.type==="VIRTUAL_QUEUE_POSITION")return h(p);if(p.type&&wr.has(p.type))return l(p)}catch(k){console.error(k)}}).filter(p=>!!p);return this.tracker.update(S,this),S}upcomingDrops(n){const r=P().time.slice(0,5),a=this.data.drops[n.id]??[],s=a.findIndex(({time:c})=>c>=r);return s>=0?a.slice(s):[]}nextDropTime(n){var r;return(r=this.upcomingDrops(n)[0])==null?void 0:r.time}getPark(n){return n=oe(n),this.data.parks.get(n)??{id:n,name:"",icon:"",geo:{n:0,s:0,e:0,w:0},theme:{bg:"bg-blue-500",text:"text-blue-500"}}}getExperience(n,r,a){var s;return n=oe(n),{id:n,name:((s=this.data.experiences[n])==null?void 0:s.name)||a,park:this.getPark(r)}}async primeGuestCache(){this.primaryGuestId===""&&(this.primaryGuestId=".",await this.guests())}cacheGuest(n,r,a){this.guestCache.set(n,{name:r,characterId:a})}async request(n){if(n.userId??!0){const{swid:r}=this.authStore.getData();n={...n},n.params={...n.params,userId:r}}return super.request(n)}}const Vt="bg1.genie.bookings";class Nr{constructor(){C(this,"date");C(this,"expIds",new Set);C(this,"experiencedExpIds",new Set);const{date:t=P().date,expIds:n=[],experiencedExpIds:r=[]}=JSON.parse(localStorage.getItem(Vt)||"{}");this.date=t,this.expIds=new Set(n),this.experiencedExpIds=new Set(r),this.checkDate()}experienced(t){return this.experiencedExpIds.has(t.id)}async update(t,n){this.checkDate();const r=t.filter(s=>s.type==="LL"&&!!s.cancellable);for(const s of r)this.experiencedExpIds[s.modifiable?"delete":"add"](s.id);const a=this.expIds;this.expIds=new Set(r.map(s=>s.id));for(const s of a){if(this.expIds.has(s))continue;const{ineligible:c}=await n.guests({id:s}),d=c.some(o=>o.ineligibleReason==="EXPERIENCE_LIMIT_REACHED");this.experiencedExpIds[d?"add":"delete"](s)}localStorage.setItem(Vt,JSON.stringify({date:this.date,expIds:[...this.expIds],experiencedExpIds:[...this.experiencedExpIds]}))}checkDate(){const t=P().date;this.date!==t&&(this.date=t,this.expIds=new Set,this.experiencedExpIds=new Set)}}const Sr=e=>e.sort((t,n)=>+n.primary-+t.primary||+n.preselected-+t.preselected||t.name.localeCompare(n.name)),Er=e=>`/application/v1/guest/${e}`;class je extends Pe{async getQueues(){var n;const t=await this.post({resource:"getQueues"});if(!Array.isArray((n=t.data)==null?void 0:n.queues))throw new le(t);return t.data.queues.filter(r=>!!r.categoryContentId).map(({queueId:r,tabContentId:a="",...s})=>({...s,id:r,park:this.data.parks.get(a.split(";")[0])}))}async getQueue(t){const n=(await this.getQueues()).find(r=>r.id===t.id);if(n)return n;throw new Error("Queue not Found")}async getLinkedGuests(t){const{data:n}=await this.post({resource:"getLinkedGuests",data:{queueId:t.id,requestType:"REVIEW"}});return Sr(n.guests.map(({guestId:r,firstName:a,lastName:s,isPrimaryGuest:c,isPreselected:d,...o})=>({...o,id:r,name:`${a} ${s}`.trim(),primary:!!c,preselected:!!d})))}async joinQueue(t,n){const r=n.map(c=>c.id),a=await this.post({resource:"joinQueue",data:{queueId:t.id,guestIds:r}}),{data:s}=a;if(s.responseStatus==="OK"){const c=s.positions.find(d=>d.queueId===t.id&&d.guestIds.length>0&&r.some(o=>d.guestIds.includes(o)));if(!c)throw new le(a);return{boardingGroup:c.boardingGroup,conflicts:{},closed:!1}}else if(s.responseStatus==="INVALID_GUEST"||s.responseStatus==="CLOSED_QUEUE"){const c=s.responseStatus==="CLOSED_QUEUE",d=new Set,o={};for(const u of s.conflicts)for(const m of u.guestIds){const h=n.find(_=>_.id===m);h&&(o[h.id]=u.conflictType,d.add(m))}const l=n.filter(u=>!d.has(u.id));if(c||l.length===0)return{boardingGroup:null,conflicts:o,closed:c};const f=await this.joinQueue(t,l);return f.conflicts={...o,...f.conflicts},f}else throw new le(a)}async post(t){try{return await this.request({...t,method:"data"in t?"POST":"GET",path:Er(t.resource)})}catch(n){if(n instanceof le){const r=n.response,{ok:a,status:s}=r;if(!a&&s<500&&s!==401)return r}throw n}}}C(je,"origins",{WDW:"https://vqguest-svc-wdw.wdprapps.disney.com",DLR:"https://vqguest-svc.wdprapps.disney.com"});const $n=G({}),Ir=$n.Provider,De=()=>U($n),Mn=G({}),Tr=Mn.Provider,F=()=>U(Mn),On=G({resort:"WDW",parks:new Map,experiences:{},drops:{}}),Cr=On.Provider,Ae=()=>U(On),Gn=G({}),Pr=Gn.Provider,at=()=>U(Gn),Un=G({goTo:()=>{},goBack:async()=>{}}),Dr=Un.Provider,$=()=>U(Un),Bn=G({current:i("div",{})}),Ar=Bn.Provider,ot=()=>U(Bn);let Lr=0;const jt=()=>++Lr,ve=()=>Number(location.hash.slice(1))||0;let Ye=()=>{};class Rr extends Promise{constructor(){super(t=>{Ye=()=>{t(),Ye=()=>{}}})}}function zn({children:e}){const[t,n]=I({current:e}),r=V([{elem:e,key:0}]),a=V({goTo(c,d){let o=ve(),l;d!=null&&d.replace?(l=r.current[o].key??jt(),n(f=>({...f,current:c}))):(r.current=r.current.slice(0,++o),location.hash=`#${o}`,l=jt()),r.current[o]={elem:c,key:l}},goBack({screen:c,props:d}={}){if(c){const o=ve();for(let l=o-1;l>=0;--l)if(r.current[l].elem.type===c){if(history.go(l-o),d){const f={...r.current[l].elem.props,...d};r.current[l].elem=i(c,{...f})}break}}else history.back();return new Rr}});D(()=>{function c(){var l,f;Ye();const o=ve();o>=r.current.length?history.back():n({current:((l=r.current[o])==null?void 0:l.elem)??i("div",{}),prev:(f=r.current[o-1])==null?void 0:f.elem})}function d(o){o.preventDefault()}return location.replace("#0"),addEventListener("hashchange",c),addEventListener("beforeunload",d),()=>{removeEventListener("hashchange",c),removeEventListener("beforeunload",d)}},[]);const s=Math.min(ve(),r.current.length-1);return i(Dr,{value:a.current,children:i(Ar,{value:t,children:r.current.slice(0,s+1).map(({elem:c,key:d},o)=>i("article",{hidden:o!==s,children:c},d))})})}const ct={bg:"bg-blue-500",text:"text-blue-500"},Hn=G(ct),Wn=Hn.Provider,B=()=>U(Hn),$r={normal:"py-1",small:"py-1.5 text-xs uppercase tracking-wide",full:"w-full py-3"};function R(e){const{goBack:t}=$(),{type:n,back:r,onClick:a,className:s,...c}=e;let d=`${$r[n||"normal"]} ${s||""}`;const{bg:o}=B();return d.includes(" bg-")||(d+=` ${o} text-white`),i("button",{onClick:async()=>{a&&await a(),r&&(r===!0?t():t(r))},className:`${d} inline-flex items-center justify-center min-w-[36px] rounded-lg px-2 font-semibold disabled:opacity-50`,...c})}function H(e){return i("div",{className:"mb-20",children:i("div",{className:"fixed bottom-0 left-0 w-full px-5 pb-5 text-center",children:i(R,{...e,className:"max-w-2xl mx-auto shadow-[0px_4px_8px_-1px_#0005]",type:"full"})})})}function z({children:e,className:t,title:n}){return t||(t=""),t.match(/\bw-\S+\s*/)||(t+=" w-4"),t.match(/\bh-\S+\s*/)||(t+=" h-auto"),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16",className:`mx-auto ${t}`,role:"img",children:[n&&i("title",{children:n}),e]})}/**
 * Modified arrow-left2 icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Mr(e){return i(z,{...e,children:i("path",{d:"M0.293,7.337L7.333,0.297C7.723,-0.093 8.357,-0.093 8.747,0.297C9.137,0.687 9.137,1.321 8.747,1.711L3.414,7.044L15,7.044C15.552,7.044 16,7.492 16,8.044C16,8.596 15.552,9.044 15,9.044L3.414,9.044L8.747,14.377C9.137,14.767 9.137,15.401 8.747,15.791C8.357,16.181 7.723,16.181 7.333,15.791L0.293,8.751C0.102,8.561 0,8.307 0,8.044C0,7.781 0.102,7.527 0.293,7.337Z"})})}function Or({title:e,children:t}){const{prev:n}=ot(),{bg:r,text:a}=B();function s(c){return!Cn(c)||typeof c.type=="string"?c:c.type===N?zi.map(c.props.children,s):Xi(c,{className:`bg-white bg-opacity-90 ${a} ${c.props.className||""}`})}return i("div",{className:`flex justify-end gap-x-2 gap-y-1 min-h-[52px] px-3 py-2 text-lg text-white ${r}`,children:[!!n&&i(R,{back:!0,className:"-my-2 -ml-3",title:"Go Back",children:i(Mr,{})}),i("h1",{className:"flex-1 self-center py-0.5 text-xl font-semibold overflow-hidden whitespace-nowrap",children:e}),s(t)]})}function M({heading:e,buttons:t,footer:n,theme:r,children:a,contentRef:s}){const c=B();return r??(r=c),i(Wn,{value:r,children:i("div",{className:"fixed inset-0 flex flex-col",children:[i(Or,{title:e,children:t}),i("div",{ref:s,className:"relative flex-1 overflow-auto px-3 pb-3",children:a}),n&&i("div",{className:`relative ${r.bg} text-white font-semibold`,children:n})]})})}const Yt="bg1.disclaimer.accepted",Gr={bg:"bg-red-600",text:"text-red-600"};function Ur(){const[e,t]=I(!!localStorage.getItem(Yt));return e?null:i(Br,{onAccept:()=>{localStorage.setItem(Yt,"1"),t(!0)}})}function Br({onAccept:e}){return i(M,{heading:"Warning!",theme:Gr,children:[i("p",{children:'Use at your own risk. BG1 is highly experimental, for demonstration purposes only, and provided "as is" without warranty of any kind. It is in no way endorsed by or associated with the Walt Disney Company and could stop working at any time for any reason. To ensure the intended experience, always use the official Disney app.'}),i(H,{onClick:e,children:"Accept"})]})}function Fn(){return i(M,{heading:"BG1 News",children:i("iframe",{src:"https://joelface.github.io/bg1/news.html",className:"absolute inset-0 w-full h-full"})})}const Kt="bg1.news.version";function zr(e){const[t,n]=I(()=>{const r=Number(localStorage.getItem(Kt));return Number.isInteger(r)?r:0});return t<e?i(N,{children:[i(Fn,{}),i(H,{onClick:()=>{localStorage.setItem(Kt,String(e)),n(e)},children:"Close"})]}):null}function lt(e){const t=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}}const Hr="181874e5af6";function Wr(e){return"deferredUuid"in e&&e.deferredUuid!==void 0}class Fr{constructor(t,n,r,a=!1){C(this,"iframe");C(this,"resort");C(this,"logging");C(this,"handlers",{});C(this,"handshakeAcked",!1);C(this,"onMessage",t=>{if(t.source!==this.iframe.contentWindow||t.data==="inner.loaded")return;const n=JSON.parse(t.data);this.logging&&console.log("Message:",n);const r=n.type==="message"?n.eventName:n.type,a=this.handlers[r],s=a?a("data"in n?n.data:null):void 0;Wr(n)&&this.send({type:"deferred",action:"resolve",deferredUuid:n.deferredUuid,data:s??{}})});this.iframe=t,this.resort=r,this.logging=a,this.on("handshake",()=>{this.handshakeAcked||(this.handshakeAcked=!0,this.send({type:"handshakeAck"}),this.logging&&this.sendMessage("setLogLevel",{level:"log"}),this.sendMessage("workflow.execute",{name:"login"}))}),this.on("lightbox.hide",()=>this.open()),this.on("session.dateOfBirth.read",()=>this.open()),this.on("session.loggedin",({token:s})=>{n({swid:s.swid,accessToken:s.access_token,expires:new Date(s.exp)})})}open(){addEventListener("message",this.onMessage),this.iframe.src=this.authPageUrl,this.handshakeAcked=!1}close(){removeEventListener("message",this.onMessage)}on(t,n){this.handlers[t]=n}sendMessage(t,n){this.send({type:"message",eventName:t,data:n})}send(t){var n;(n=this.iframe.contentWindow)==null||n.postMessage(JSON.stringify({...t,name:"lightbox-client-window"}),this.authPageUrl)}get authPageUrl(){return`https://cdn.registerdisney.go.com/v2/TPR-${this.resort}-LBSDK.IOS-PROD/en-US?include=l10n,config,html,js&buildId=${Hr}`}}function Vr({resort:e,onLogin:t}){const n=V(null);return D(()=>{if(!n.current)return;const r=new Fr(n.current,t,e);return r.open(),()=>r.close()},[e,t,n]),i("iframe",{title:"Disney Login Form",ref:n,className:"fixed top-0 left-0 w-full h-full border-0"})}const Vn=G([]),jr=Vn.Provider,jn=()=>U(Vn);function Yr(){const e=De(),[t,n]=I([]);return D(()=>{e.parties().then(n)},[e]),t}const Qt="bg1.genie.park",Yn=G({park:{},setPark:()=>{}}),Kr=({value:e,children:t})=>i(Yn.Provider,{value:e,children:t}),te=()=>U(Yn);function Qr(){const{parks:e}=Ae(),[t,n]=I(()=>{const r=[...e.values()][0],{id:a=r.id,date:s=""}=JSON.parse(localStorage.getItem(Qt)||"{}")||{};return s===P().date&&e.get(a)||r});return D(()=>{localStorage.setItem(Qt,JSON.stringify({id:t.id,date:P().date}))},[t]),{park:t,setPark:n}}/**
 * Refresh icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function dt({className:e}){return i(z,{className:e,children:i("path",{d:"M16 6h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.343-2.344v6z"})})}function ut(e){const{children:t,color:n="bg-black",className:r="",...a}=e;return i("div",{className:`fixed inset-0 z-10 flex items-center justify-center p-2 ${n} bg-opacity-75 ${r}`,...a,children:t})}function Jr(){const{bg:e}=B();return i(ut,{color:"bg-white",children:i("div",{className:"w-[50px] mx-auto",children:i("div",{"aria-label":"Loading\u2026",className:`rounded-full p-[20%] ${e}`,children:i(dt,{className:"animate-spin w-full text-white"})})})})}const qr=3e3,Zr={alert:"bg-yellow-200",error:"bg-red-200"};function Kn(){const[,e]=I(0),[t,n]=I(""),[r,a]=I("alert"),s=W((d,o)=>{n(d),a(o||"alert"),e(l=>(clearTimeout(l),d?self.setTimeout(()=>{n("")},qr):l))},[]);return[t?i(Xr,{message:t,type:r}):null,s]}function Xr({message:e,type:t}){return e?i("div",{role:"alert",className:`fixed bottom-20 left-0 w-full p-2 font-semibold text-center ${Zr[t]} text-gray-800`,children:e}):null}async function Jt(e){return new Promise(t=>{setTimeout(t,e)})}const es=500;function Y(){const[e,t]=I(0),[n,r]=Kn(),a=W(async(c,d={})=>{var y;const{messages:o={},minLoadTime:l=es}=d,f={error:"Unknown error occurred",request:"Network request failed",...o};r("");let u=()=>null;const m=new Promise(S=>{u=()=>S(null)});async function h(...S){await m,r(...S)}t(S=>S+1);const _=Jt(l);try{await c(h)}catch(S){const p=(y=S==null?void 0:S.response)==null?void 0:y.status;f[S.name]!==void 0?h(f[S.name],"error"):Number.isInteger(p)?h(p in f?f[p]:f.request,"error"):(console.error(S),h(f.error,"error"))}await _,await Jt(0),t(S=>S-1),u()},[r]),s=e>0||n?i(N,{children:[e>0&&i(Jr,{}),n]}):null;return{loadData:a,loaderElem:s,flash:r}}function Qn(e){const[,t]=I(0);return W((n=0)=>{t(r=>Date.now()-r<n?r:(e(),Date.now()))},[e])}const Jn=G({plans:[],refreshPlans:()=>{},loaderElem:null}),ts=Jn.Provider,ae=()=>U(Jn);function ns(){const e=F(),{loadData:t,loaderElem:n}=Y(),[r,a]=I([]),s=Qn(W(()=>{t(async()=>{a(await e.bookings())})},[e,t]));return D(s,[s]),{plans:r,refreshPlans:s,loaderElem:n}}const qn=G({current:void 0,begin:()=>{},end:()=>{}}),is=qn.Provider,ne=()=>U(qn),rs=()=>{const[e,t]=I({current:void 0,begin:n=>{t({...e,current:n})},end:()=>{t(n=>n.current?{...n,current:void 0}:n)}});return e},Zn=G({tabs:[],active:{name:"",icon:i("div",{}),component:()=>null},changeTab:()=>{},scrollPos:{get:()=>0,set:()=>{}}}),Xn=()=>U(Zn);function ss({name:e,icon:t}){const n=B(),{active:r,changeTab:a}=Xn();if(!a)return null;const c=(r==null?void 0:r.name)===e?`bg-white bg-opacity-90 ${n.text}`:`${n.bg} text-white`;return i("button",{className:"px-4 py-2",onClick:()=>a(e),children:[i("div",{className:`min-w-[3rem] rounded-full py-1.5 ${c}`,children:t}),i("div",{className:"mt-0.5 text-sm",children:e})]})}function ht({heading:e,buttons:t,children:n,contentRef:r}){const{tabs:a,scrollPos:s,footer:c}=Xn();let d=V(null);return r&&(d=r),tt(()=>{const o=d.current;if(!o)return;o.scroll(0,s.get());const l=()=>s.set(o.scrollTop);return o.addEventListener("scroll",l),()=>o.removeEventListener("scroll",l)},[s]),i(M,{heading:e,buttons:t,footer:i(N,{children:[i("div",{className:"flex items-center justify-center",children:a.map(o=>Se(ss,{...o,key:o.name}))}),c]}),contentRef:d,children:n})}function as({tabs:e,footer:t},n){return function r({tabName:a}){const{goTo:s}=$(),c=W(l=>{l!==a&&s(i(r,{tabName:l}),{replace:!0})},[a,s]),d=V(Object.fromEntries(e.map(l=>[l.name,0]))),o=e.find(({name:l})=>l===a);return o?i(Zn.Provider,{value:{tabs:e,active:o,changeTab:c,scrollPos:{get:()=>d.current[o.name],set:l=>{d.current[o.name]=l}},footer:t},children:i(n,{tab:o})}):null}}const ei=G({}),os=ei.Provider,cs=()=>U(ei),ti=G({experiences:[],refreshExperiences:()=>{},loaderElem:null}),ls=ti.Provider,ft=()=>U(ti);function ds(){const e=F(),t=cs(),{park:n}=te(),{loadData:r,loaderElem:a}=Y(),[s,c]=I([]),d=Qn(W(()=>{r(async()=>{const o=t.shows(n);let l={...Object.fromEntries((await e.experiences(n)).map(f=>[f.id,f]))};try{l={...await o,...l}}catch(f){console.error(f)}c(Object.values(l))})},[n,e,t,r]));return D(d,[d]),D(()=>c([]),[n]),{experiences:s,refreshExperiences:d,loaderElem:a}}/**
 * Calendar icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ni({className:e}){return i(z,{className:e,children:i("path",{d:"M5 6h2v2h-2zM8 6h2v2h-2zM11 6h2v2h-2zM2 12h2v2h-2zM5 12h2v2h-2zM8 12h2v2h-2zM5 9h2v2h-2zM8 9h2v2h-2zM11 9h2v2h-2zM2 9h2v2h-2zM13 0v1h-2v-1h-7v1h-2v-1h-2v16h15v-16h-2zM14 15h-13v-11h13v11z"})})}/**
 * Clock icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function us(e){return i(z,{...e,children:i("path",{d:"M10.293 11.707l-3.293-3.293v-4.414h2v3.586l2.707 2.707zM8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM8 14c-3.314 0-6-2.686-6-6s2.686-6 6-6c3.314 0 6 2.686 6 6s-2.686 6-6 6z"})})}/**
 * Power icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Ke(e){return i(z,{...e,children:i("path",{d:"M6 0l-6 8h6l-4 8 14-10h-8l6-6z"})})}/**
 * Checkmark icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function qt({className:e}){return i(z,{className:e,children:i("path",{d:"M13.5 2l-7.5 7.5-3.5-3.5-2.5 2.5 6 6 10-10z"})})}/**
 * Arrow-down icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function Zt(e){return i(z,{...e,children:i("path",{d:"M8 15.5l7.5-7.5h-4.5v-8h-6v8h-4.5z"})})}/**
 * Star icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function hs(e){return i(z,{...e,children:i("path",{d:"M16 6.204l-5.528-0.803-2.472-5.009-2.472 5.009-5.528 0.803 4 3.899-0.944 5.505 4.944-2.599 4.944 2.599-0.944-5.505 4-3.899z"})})}function ii({bg:e,experiences:t,heading:n}){return i("div",{className:`mt-4 rounded ${e}`,children:[i("h3",{className:"mt-0 p-1 text-white text-center",children:n}),i("ul",{className:"list-disc py-2 pl-8 bg-white bg-opacity-90",children:t.map(r=>i("li",{children:r.name},r.id))})]})}function q({date:e,time:t,...n}){return i("time",{...n,dateTime:e||t,children:e?sr(e):t?j(t):""})}function Le({start:e,end:t,timeOnly:n}){const r=fs({start:e,end:t}),a=t?i(N,{children:[r.start?i(q,{time:r.start}):i("span",{children:"Park Open"})," \u2013"," ",r.end?i(q,{time:r.end}):i("span",{children:"Park Close"})]}):i(q,{time:e.time});if(n)return a;const s=P().date;return i("table",{className:"mt-4 text-lg",children:i("tbody",{children:[i(Xt,{label:t?"Arrive by":"Reservation at",data:a}),(t==null?void 0:t.date)&&t.date>(e.date??s)&&i(Xt,{label:"Valid until",data:i(q,{date:t.date})})]})})}function Xt({label:e,data:t}){return i("tr",{children:[i("th",{className:"text-right",children:[e,":"]}),i("td",{className:"pl-2 font-semibold",children:t})]})}function fs({start:e,end:t}){const n=P().date;return{start:(e.date||"")<n?void 0:e.time,end:t==null?void 0:t.time}}const en=i("span",{"aria-hidden":!0,children:"\u2022"});function ri({booking:e,button:t}){const n=B();return i("div",{className:"flex items-center gap-x-3",children:[i("div",{className:"flex-1 min-w-0",children:[i("div",{className:"flex items-center gap-x-2 text-gray-500 text-sm font-semibold uppercase whitespace-nowrap",children:[e.type==="DAS"&&i(N,{children:[i("span",{children:"DAS"}),en]}),e.type==="BG"?i(N,{children:[i("span",{children:["BG ",e.boardingGroup]}),e.status==="SUMMONED"&&i(N,{children:[en,i("span",{className:`${n.text} font-bold`,children:"Board Now"})]})]}):i(Le,{...e,timeOnly:!0})]}),i("div",{className:"text-lg font-semibold leading-snug truncate",children:e.choices?"Multiple Experiences":e.name})]}),t&&i("div",{children:t})]})}function si(){const e=ne(),t=B();return e.current?i("div",{className:`sticky top-0 -mx-3 pb-1 ${t.bg}`,children:i("div",{className:"pb-3 bg-white",children:[i("div",{className:`pb-1 ${t.bg} text-white text-sm font-semibold uppercase text-center`,children:"Modifying Reservation"}),i("div",{className:"mt-2 px-3",children:i(ri,{booking:e.current,button:i(R,{type:"small",back:{screen:me},onClick:e.end,children:"Keep"})})})]})}):null}function O({guests:e,selectable:t,conflicts:n}){return e.length===0?null:i("ul",{className:"mt-2",children:e.map(r=>{var a;return i("li",{className:"px-3 py-1",children:i("label",{className:"flex items-center",children:[t&&i("input",{type:"checkbox",checked:t.isSelected(r),onChange:()=>t.onToggle(r),className:"mr-3"}),i("span",{className:"w-[48px] h-[48px] leading-[48px] mr-3 rounded-full text-3xl font-bold text-center bg-gray-400 text-white",children:r.avatarImageUrl?i("img",{src:r.avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):i("span",{"aria-hidden":"true",children:r.name[0]})}),i("span",{className:"leading-tight",children:[r.name,(n==null?void 0:n[r.id])&&i("span",{className:"block text-xs font-semibold text-red-700 uppercase",children:(a=n[r.id])==null?void 0:a.replace(/_/g," ")})]})]})},r.id)})})}const ai="bg1.genie.partyIds";function oi(){const e=JSON.parse(localStorage.getItem(ai)||"[]");return Array.isArray(e)?e:[]}function ms(){const e=F();D(()=>e.setPartyIds(oi()),[e])}function ps(){const e=F(),{loadData:t,loaderElem:n}=Y(),[r,a]=I(!0),[s,c]=I(),[d,o]=I(()=>{const h=new Set(oi());return a(h.size===0),h});function l(){const h=[...d];localStorage.setItem(ai,JSON.stringify(h)),e.setPartyIds(h)}D(()=>{t(async()=>{const h=await e.guests();c([...h.eligible,...h.ineligible].sort((_,y)=>+!_.primary-+!y.primary||_.name.localeCompare(y.name)))})},[e,t]),D(()=>{r&&o(new Set)},[r]);const f=s==null?void 0:s.filter(h=>d.has(h.id)),u=s==null?void 0:s.filter(h=>!d.has(h.id)),m=h=>i("li",{children:i("label",{className:"flex items-center mt-2",children:[i("input",{type:"radio",name:"auto",onChange:()=>a(h.auto),checked:r===h.auto,className:"mr-2"})," ",h.children]})});return i(M,{heading:"Party Selection",children:[i("p",{children:"By default, all eligible guests (up to a maximum of 12) are automatically selected when you book a Lightning Lane. If you would like to limit who you book for, you can manually select your party here."}),i("ul",{children:[i(m,{auto:!0,children:"Book for all eligible guests"}),i(m,{auto:!1,children:"Only book for selected guests"})]}),r?null:(s==null?void 0:s.length)===0?i("p",{className:"text-red-700",children:"No guests to select"}):f&&u?i(N,{children:[f.length>0&&i(N,{children:[i("h3",{children:"Your Party"}),i(O,{guests:f,selectable:{isSelected:()=>!0,onToggle:h=>{const _=new Set(d);_.delete(h.id),o(_)}}})]}),u.length>0&&i(N,{children:[i("h3",{children:"Add to Your Party"}),i(O,{guests:u,selectable:{isSelected:()=>!1,onToggle:h=>{const _=new Set(d);_.add(h.id),o(_)}}})]})]}):null,n,i(H,{back:!0,disabled:!r&&d.size===0,onClick:l,children:"Save"})]})}function Re({name:e,onClick:t,...n}){return i(R,{...n,title:`Refresh ${e}`,onClick:t,children:i(dt,{})})}const ci=G({eligible:[],ineligible:[],selected:[],setSelected:()=>null,experience:{name:"",park:{name:"",theme:{bg:"",text:""}}}}),li=ci.Provider,di=()=>U(ci),_s="https://bg1.joelface.com/ping",tn="bg1.ping";async function mt(e){const{date:t}=P();let n={};try{n=JSON.parse(localStorage.getItem(tn)||"{}")}catch{}if(n[e]===t)return;const{ok:r}=await rt(_s,{method:"POST",data:{service:e}});n[e]=t,r&&localStorage.setItem(tn,JSON.stringify(n))}function gs(e){return i(z,{...e,children:i("path",{d:"M 5.5253906 0.9296875 L 3.4042969 3.0507812 L 8.3535156 8 L 3.4042969 12.949219 L 5.5253906 15.070312 L 10.474609 10.121094 L 12.595703 8 L 10.474609 5.8789062 L 5.5253906 0.9296875 z"})})}function ui(e){return i("div",{className:`mt-4 border-2 rounded border-green-600 p-1 font-semibold text-center text-green-600 bg-green-100 ${e.className}`,children:e.children})}function ys({booking:e,onCancel:t,dasGuest:n}){const r=F(),a=De(),s=e.type==="DAS"?a:r,{refreshPlans:c}=ae(),[d,o]=I(new Set),{loadData:l,loaderElem:f}=Y(),{name:u,park:m,guests:h}=e,_=d.size===0,y=d.size===h.length;async function S(){_||(await l(async()=>{await s.cancelBooking([...d]),c()}),t(h.filter(p=>!d.has(p))))}return i(M,{heading:"Cancel Guests",theme:m.theme,children:[i("h2",{children:u}),i("div",{children:m.name}),i(Le,{...e}),i("div",{className:"ml-3",children:i("label",{className:"flex items-center py-4",children:[i("input",{type:"checkbox",checked:y,onChange:()=>o(new Set(y?[]:h))}),i("span",{className:"ml-3",children:"Select All"})]})}),!_&&i("div",{className:"mb-4",children:[i("h3",{children:"Cancel These Guests"}),i(O,{guests:h.filter(p=>d.has(p)),selectable:{isSelected:()=>!0,onToggle:p=>{if(n&&p!==n&&d.has(n))o(new Set);else{const k=new Set(d);k.delete(p),o(k)}}}})]}),!y&&i("div",{children:[i("h3",{children:"Select Guests to Cancel"}),i(O,{guests:h.filter(p=>!d.has(p)),selectable:{isSelected:()=>!1,onToggle:p=>{o(new Set(p===n?h:d).add(p))}}})]}),i(H,{back:!0,disabled:_,onClick:S,children:"Cancel "+(y?"Reservation":"Guests")}),f]})}function fe({booking:e,isNew:t}){var w;const{goTo:n,goBack:r}=$(),{setPark:a}=te(),{parks:s}=Ae(),c=jn(),{name:d,park:o,choices:l,type:f,subtype:u,start:m}=e,h=f==="DAS"&&u==="IN_PARK"?e.guests.find(b=>c.find(v=>v[0].id===b.id)):void 0,_=ne(),[y,S]=I(e.cancellable&&(f!=="DAS"||h)?e.guests:void 0),p=new Map([[o,[]],...[...s.values()].map(b=>[b,[]])]);for(const b of l||[])(w=p.get(b.park))==null||w.push(b);const k=[...p].filter(([,b])=>b.length>0).map(([b])=>b),E=(l?k.length===1?k[0]:{}:o).theme??ct;return i(M,{heading:"Your "+{LL:"Lightning Lane",DAS:"DAS Selection",BG:"Boarding Group",APR:"Park Pass",RES:"Reservation"}[f],theme:E,buttons:e.modifiable&&i(R,{onClick:()=>{_.begin(e),a(e.park),r({screen:me,props:{tabName:"Genie+"}})},children:"Modify"}),children:[i("div",{className:`-mx-3 px-2 py-1 text-center ${E.bg} text-white text-sm font-semibold uppercase`,children:i(q,{date:m.date})}),l?i("h2",{children:"Multiple Experiences"}):i(N,{children:[i("h2",{children:d}),o.name&&i("div",{children:o.name})]}),f==="BG"?i(N,{children:[e.status==="SUMMONED"&&i(ui,{children:"Your boarding group has been called"}),i("h3",{children:["Boarding Group:"," ",i("span",{className:"ml-1 font-semibold",children:e.boardingGroup})]}),i("p",{children:"Check the official Disney app for return time and other virtual queue information."})]}):i(Le,{...e}),l&&i(N,{children:[i("p",{children:[i("b",{children:d})," was temporarily unavailable during your return time. You may redeem this Lightning Lane at one of these replacement experiences:"]}),[...p].filter(([,b])=>b.length>0).map(([b,v])=>i(ii,{heading:b.name,experiences:v,bg:b.theme.bg},b.id))]}),i("div",{className:"flex mt-4",children:[i("h3",{className:"inline mt-0",children:"Your Party"}),e.cancellable&&y&&i(R,{type:"small",onClick:()=>{n(i(ys,{booking:{...e,guests:y},dasGuest:h,onCancel:b=>{b.length>0?S(b):r()}}))},className:"ml-3",children:"Cancel"})]}),i(O,{guests:y||e.guests,conflicts:Object.fromEntries(e.type==="LL"?e.guests.filter(b=>(b.redemptions??1)!==1).map(b=>[b.id,`Redemptions left: ${b.redemptions}`]):[])}),t&&i(H,{onClick:()=>r({screen:me,props:{tabName:"Plans"}}),children:"Show Plans"})]})}function hi({...e}){var u,m;const{plans:t,refreshPlans:n,loaderElem:r}=ae(),{goTo:a}=$(),s=B();function c(h){a(i(fe,{booking:h}))}const d=P().date,o=new Map,l=new Map;for(const h of t){const _=h.start.date??d;o.has(_)||o.set(_,[]),h.type!=="APR"&&((u=o.get(_))==null||u.push(h)),l.has(_)||l.set(_,new Set),(h.type!=="LL"||h.subtype!=="MEP")&&h.park.icon&&((m=l.get(_))==null||m.add(h.park))}const f=i("p",{className:"font-semibold text-center uppercase text-gray-500",children:"No existing plans"});return i(ht,{heading:"Your Plans",buttons:i(Re,{name:"Plans",onClick:n}),theme:ct,...e,children:[i("ul",{children:t.length>0?[...o].map(([h,_])=>i("li",{children:[i("div",{className:"sticky top-0 -mx-3 pt-1 bg-white",children:i("div",{className:"flex items-center",children:[i("h2",{className:`flex-1 mt-0 rounded-r-full px-3 py-1 ${s.bg} text-white text-sm uppercase`,children:i(q,{date:h})}),i("ul",{className:"px-3 pl-2 text-lg text-right",children:[...l.get(h)??[]].map(y=>i("li",{className:"inline ml-1 first:ml-0","aria-label":y.name,children:y.icon},y.id))})]})}),_.length>0?i("ul",{className:_.length===0?"mt-3":"",children:_.map(y=>i("li",{className:"py-2.5 first:border-0 border-t-4 border-gray-300",onClick:()=>c(y),children:i(ri,{booking:y,button:i("button",{className:s.text,title:"More Info",children:i(gs,{})})})},y.bookingId))}):f]},h)):f}),r]})}function vs({...e}){const{goTo:t}=$();return i(N,{children:i(R,{...e,onClick:()=>t(i(hi,{})),title:"Plans",children:i(ni,{})})})}function pt(){const{ineligible:e}=di();return i(O,{guests:e,conflicts:Object.fromEntries(e.map(t=>[t.id,t.eligibleAfter?`TOO EARLY (${j(t.eligibleAfter)})`:t.ineligibleReason||"ELIGIBLE FOR NEW BOOKING"]))})}function bs(){const e=F(),t=ne();return i(N,{children:[t.current?i(N,{children:[i("h3",{children:"Unable to Modify"}),i("p",{children:"Your current reservation cannot be modified to this experience due to the following conflicts:"})]}):i(N,{children:[e.nextBookTime&&e.nextBookTime.slice(0,5)>P().time.slice(0,5)&&i(ui,{children:["Eligible at ",i(q,{time:e.nextBookTime})]}),i("h3",{children:"No Eligible Guests"}),i("p",{children:"No one in your party is currently eligible for this Lightning Lane."})]}),i(pt,{})]})}function xs({onRefresh:e}){return i(N,{children:[i("h3",{children:"No Guests Found"}),i("p",{children:"Your party could not be loaded. This is probably just a temporary network error. Wait a few seconds and try again."}),i(H,{onClick:e,children:"Try Again"})]})}function ws(e){return i("div",{className:`mt-4 border-2 rounded border-red-600 p-1 font-semibold text-center text-red-600 bg-red-100 ${e.className}`,children:e.children})}function ks({party:e}){const{eligible:t,ineligible:n,selected:r,setSelected:a,experience:s}=e,[c,d]=I(new Set(r)),[o,l]=Kn(),{maxPartySize:f}=F();function u(m){d(h=>{l(""),h=new Set(h);const _=h.has(m)?"delete":"add";return _==="add"&&h.size>=f?l(`Maximum party size: ${f}`):h[_](m),h})}return i(li,{value:e,children:i(M,{heading:"Modify Party",theme:s.park.theme,children:[i("h2",{children:s.name}),i("div",{children:s.park.name}),i("h3",{children:"Your Party"}),i(O,{guests:t,selectable:{isSelected:m=>c.has(m),onToggle:u}}),n.length>0&&i(N,{children:[i("h3",{children:"Ineligible Guests"}),i(pt,{})]}),i(H,{back:!0,disabled:c.size===0,onClick:()=>{a(t.filter(m=>c.has(m)))},children:"Confirm Party"}),o]})})}function _t({button:e}){const{goTo:t}=$(),n=di(),{eligible:r,selected:a}=n,{maxPartySize:s}=F();return i(N,{children:[r.length>s&&a.length===s&&i(ws,{children:"Party size restricted"}),a.length>0?i(N,{children:[i("div",{className:"mt-4",children:[i("h3",{className:"inline mt-0",children:"Your Party"}),i(R,{type:"small",onClick:()=>t(i(ks,{party:n})),className:"ml-3",children:"Modify"})]}),i(O,{guests:a})]}):i(N,{children:[i("h3",{children:"Ineligible Guests"}),i(pt,{})]}),e]})}function Ns(){return i(N,{children:[i("h3",{children:"No Reservations Available"}),i("p",{children:"There aren't enough reservation slots available for your entire party. If only part of your group wishes to go on this attraction, edit your party to check again. Otherwise, go back to the tip board and select another attraction."}),i(_t,{})]})}function Ss({offer:e,onBook:t}){const n=ne();return i(N,{children:[i(Le,{...e}),e.changed&&i("div",{className:"text-sm",children:[i("strong",{children:"Note:"})," Return time has been changed"]}),i(_t,{button:i(H,{onClick:t,children:`${n.current?"Modify":"Book"} Lightning Lane`})})]})}const nn="https://widget.time.is/t.js";function Es(){if([...document.scripts].some(t=>t.src===nn))return;const e=document.createElement("script");e.src=nn,e.onload=fi,document.head.appendChild(e)}const Ne={};function fi(){"time_is_widget"in self&&self.time_is_widget.init(Ne)}function Is(e){Es(),Ne[e]||(Ne[e]={}),fi()}function mi(e,t){const n=document.getElementById(e);if(!n||n.firstElementChild)return t();n.textContent=P().time,setTimeout(()=>mi(e,t),100)}function Ts({id:e,onSync:t}){return D(()=>{Is(e),mi(e,t)},[e,t]),i("time",{id:e})}const Cs={WDW:"Orlando_z161",DLR:"Anaheim_z14e"},Ps=5e3;function pi({resort:e,time:t,label:n}){const r=Cs[e],[a,s]=I(null);D(()=>{setTimeout(()=>s(d=>d||!1),Ps)},[]);const c=W(()=>s(!0),[]);return i("table",{className:"mt-4 mx-auto text-gray-500",children:i("tbody",{children:[i(rn,{heading:n,time:i("time",{children:t||"--:--:--"})}),i(rn,{heading:i("a",{href:`https://time.is/${r.split("_")[0]}`,id:"time_is_link",target:"_blank",rel:"noreferrer",children:"Current time"}),time:i(N,{children:[i(Ts,{id:r,onSync:c}),a===!1&&i("span",{className:"text-sm font-sans font-semibold text-red-600",children:[" ","(unsynced)"]})]})})]})})}function rn({heading:e,time:t}){return i("tr",{children:[i("th",{scope:"row",className:"pr-3 text-right text-xs font-semibold uppercase",children:[e,":"]}),i("td",{className:"text-xl font-mono leading-tight",children:["\uFEFF",t]})]})}function Ds({startTime:e,onRefresh:t}){return i(N,{children:[e?i(N,{children:[i(pi,{resort:"WDW",time:e,label:"Booking start"}),i("p",{children:["At"," ",i("time",{dateTime:e,className:"font-semibold",children:j(e)}),", tap the ",i("span",{className:"font-semibold",children:"Check Availability"})," ","button below to start booking this Lightning Lane."]})]}):i("p",{children:"Sorry, but you can't make a Lightning Lane reservation for this attraction yet."}),i(_t,{button:i(H,{onClick:t,children:"Check Availability"})})]})}function As({experience:e}){const{goTo:t}=$(),n=F(),{refreshPlans:r}=ae(),a=ne(),[s,c]=I(),[d,o]=I(!e.flex.available&&e.flex.enrollmentStartTime!==void 0),[l,f]=I(d?null:void 0),{loadData:u,loaderElem:m}=Y();async function h(){!l||!s||u(async()=>{let E=null;E=await n.book(l,a.current,s.selected),a.end();const g=new Set(s.selected.map(b=>b.id)),w=E.guests.filter(b=>!g.has(b.id));w.length>0&&(await n.cancelBooking(w),E.guests=E.guests.filter(b=>g.has(b.id))),E&&t(i(fe,{booking:E,isNew:!0}),{replace:!0}),r(),mt("G")},{messages:{410:"Offer expired"}})}function _(){u(async E=>{var b;const w=(await n.experiences(e.park)).find(v=>v.id===e.id);(b=w==null?void 0:w.flex)!=null&&b.available?(o(!1),f(void 0)):E("Reservations not open yet")})}const y=W(()=>{u(async()=>{const E=a.current?{eligible:a.current.guests,ineligible:[]}:await n.guests(e);c({...E,selected:E.eligible.slice(0,n.maxPartySize),setSelected:g=>c(w=>{if(!w)return w;const b=new Set(w.selected);return o(v=>(v||f(T=>T===null||g.some(A=>!b.has(A))?void 0:T),v)),{...w,selected:g}}),experience:e})})},[n,e,a,u]);D(()=>{s||y()},[s,y]);const S=W(E=>{!s||s.selected.length===0||u(async()=>{try{const g=await n.offer(e,s.selected,a.current),{ineligible:w}=g.guests;if(w.length>0){const b=new Set(w.map(T=>T.id)),v=T=>!b.has(T.id);c({...s,eligible:s.eligible.filter(v),ineligible:[...w,...s.ineligible],selected:s.selected.filter(v)})}g.active?(l&&(g.changed=!1),f(g)):f(b=>b??null)}catch(g){throw E||f(null),g}},{messages:{410:l?"No reservations available":""}})},[n,e,s,l,a,u]);D(()=>{l===void 0&&S()},[l,S]);const p=(s==null?void 0:s.eligible.length)===0,k=p&&(s==null?void 0:s.ineligible.length)===0;return i(M,{heading:"Lightning Lane",theme:e.park.theme,buttons:i(N,{children:[i(vs,{}),!d&&i(Re,{onClick:()=>{p?y():S()},name:p?"Party":"Offer"})]}),children:[i(si,{}),i("h2",{children:e.name}),i("div",{children:e.park.name}),s&&i(li,{value:s,children:d&&s?i(Ds,{startTime:e.flex.enrollmentStartTime,onRefresh:_}):k?i(xs,{onRefresh:y}):p?i(bs,{}):!s||l===void 0?i("div",{}):l===null?i(Ns,{}):i(Ss,{offer:l,onBook:h})}),m]})}function gt({label:e,children:t}){return i("div",{className:"flex items-center flex-1 whitespace-nowrap",children:[i("span",{className:"mr-2 text-xs font-semibold uppercase text-gray-500",children:e})," ",t]})}function Ls({experience:e}){const{goTo:t}=$(),{flex:n}=e;return i(gt,{label:"Genie+",children:i("span",{children:i(R,{onClick:()=>t(i(As,{experience:e})),children:n.nextAvailableTime?j(n.nextAvailableTime):"none"})})})}function _i({children:e}){return i("div",{className:"mt-8 flex justify-center",children:i("div",{children:[i("h2",{className:"mt-0 pl-1 text-gray-500 text-sm leading-tight uppercase",children:"Symbols"}),i("div",{className:"border-2 border-gray-500 rounded px-2 py-0.5 bg-gray-100",children:i("table",{children:i("tbody",{children:e})})})]})})}function re({sym:e,def:t,onInfo:n}){return i("tr",{children:[i("th",{className:"py-0.5 text-center font-bold",children:e}),i("td",{className:"pl-3 py-0.5",children:t}),n&&i("td",{className:"pl-3 py-0.5",children:i(R,{type:"small",onClick:n,children:"Info"})})]})}const Rs="_SELECT_RADIO_BUTTON_";function gi(e){const{options:t,selected:n,title:r,onChange:a,disabled:s,...c}=e,{bg:d}=B(),[o,l]=I(!1),[f,u]=I(0),m=V(null),h=V(null);tt(()=>{var T;if((T=t.values().next().value)!=null&&T.icon)return;const g=m.current,w=g==null?void 0:g.firstChild;if(!w)return;const b=w.nodeValue;if(!b)return;let v=0;for(const A of t.values())w.nodeValue=A.text,v=Math.max(g.offsetWidth,v);w.nodeValue=b,u(v)},[t]);const _=()=>{var g;return(g=h.current)==null?void 0:g.querySelector("input:checked")};D(()=>{var b;if(!o)return;const g=_();(b=g==null?void 0:g.closest("li"))==null||b.scrollIntoView(),g==null||g.focus();const w=v=>{var T;(T=h.current)!=null&&T.contains(v.target)||l(!1)};return addEventListener("focusin",w),()=>removeEventListener("focusin",w)},[o]);const y=()=>{const g=_();if(g){const w=g.value,b=t.get(w);b&&a(b.value??w)}l(!1)},S=n?t.get(n):r!==void 0?{text:r}:void 0;if(!S)return null;const{icon:p,text:k}=S;let E=!1;return i(N,{children:[i(R,{...c,title:p?`${r}: ${k}`:r,disabled:s||t.size===0,onClick:()=>l(!0),children:[p||i("span",{className:"flex-1 truncate",style:{minWidth:`${f}px`},ref:m,children:k}),i(z,{className:"w-2.5 ml-2 shrink-0",children:i("path",{d:"m6.8273 12.401-5.6333-7.7812a1.0212 1.0212 117.05 0 1 0.82716-1.62l11.958-2e-7a1.0212 1.0212 62.952 0 1 0.82714 1.62l-1.6438 2.2705a79984 79984 125.9 0 0-2.3456 3.2401l-1.6437 2.2706a1.4479 1.4479 180 0 1-2.3456 4.4e-5z"})})]}),o&&i(ut,{onChange:()=>{E||y(),E=!1},onClick:g=>{var w;E||(!((w=h.current)!=null&&w.contains(g.target))||n&&g.target.value===n)&&(l(!1),g.preventDefault())},onKeyDown:({key:g})=>{["Enter"," "].includes(g)?y():g.startsWith("Arrow")&&(E=!0)},"data-testid":"shade",children:i("div",{className:"flex flex-col min-w-[50%] max-h-[90%] rounded-lg bg-white text-black",children:[r&&i("h3",{className:`mt-0 rounded-t-lg px-2 py-1 ${d} text-white font-semibold text-center`,children:r}),i("ul",{className:"overflow-auto",ref:h,children:[...t].map(([g,w])=>i("li",{className:"border-t-2 first:border-0 border-gray-300",children:i("label",{className:"flex flex-row items-center gap-x-2.5 px-4 py-3",children:[i("input",{type:"radio",name:Rs,value:g,defaultChecked:g===n,className:"w-4 h-4 shrink-0"})," ",w.icon&&i("span",{"aria-hidden":"true",children:w.icon})," ",w.text]})},w.text))})]})})]})}function yi(e){const{parks:t}=Ae(),{park:n,setPark:r}=te(),a=ne(),s=nt(()=>new Map([...t.values()].map(c=>[c.id,{value:c,icon:c.icon,text:c.name}])),[t]);return i(gi,{...e,options:s,selected:n.id,onChange:r,disabled:!!a.current,title:"Park","data-testid":"park-select"})}function $s({experience:{type:e,standby:t}}){return t.displayNextShowTime||e==="ENTERTAINMENT"&&!t.waitTime?i(Os,{standby:t}):i(Ms,{standby:t})}const Ms=({standby:e})=>i(gt,{label:"Standby",children:e.available?i(bi,{time:e.waitTime!==void 0?e.waitTime+" min":"now"}):i(xi,{text:"down"})}),Os=({standby:e})=>i(gt,{label:i(N,{children:["Next ",i("span",{className:"hidden xs:inline",children:"Show"})]}),children:e.displayNextShowTime?i(bi,{time:e.displayNextShowTime}):i(xi,{text:"none"})}),vi="inline-block border-2 rounded px-1.5 py-0.5 font-semibold",bi=({time:e})=>i("span",{className:`${vi} border-gray-500 text-gray-500 bg-gray-100`,children:e}),xi=({text:e})=>i("span",{className:`${vi} border-red-600 text-red-600 bg-red-100`,children:e});function Gs({bookTime:e,dropTime:t}){const n=B();return!e&&!t?null:i("div",{className:`flex justify-center gap-x-10 -mx-3 px-3 pb-1 ${n.bg} text-white text-sm font-semibold uppercase text-center`,children:[i(sn,{label:"Book",time:e}),i(sn,{label:"Drop",time:t})]})}function sn({label:e,time:t}){if(!t)return null;t=t.slice(0,5);const n=P().time.slice(0,5);return i("div",{children:[e,":"," ",i("time",{dateTime:t,className:"whitespace-nowrap",children:t>n?j(t):"now"})]})}async function Us(e={}){return new Promise((t,n)=>{navigator.geolocation.getCurrentPosition(r=>{t(r)},r=>{n(r)},e)})}const Bs={maximumAge:15e3,timeout:2e3};function zs(){const[e,t]=I(),n=W(()=>{(async()=>{try{const{coords:r}=await Us(Bs);t(a=>a&&r.latitude===a[0]&&r.longitude===a[1]?a:[r.latitude,r.longitude])}catch{t(void 0)}})()},[]);return[e,n]}const Hs=(e,t)=>(e.priority||1/0)-(t.priority||1/0),Oe=(e,t)=>(t.standby.waitTime||-1)-(e.standby.waitTime||-1),Ge=(e,t)=>{var n,r;return Ie(((n=e==null?void 0:e.flex)==null?void 0:n.nextAvailableTime)||"00:00")-Ie(((r=t==null?void 0:t.flex)==null?void 0:r.nextAvailableTime)||"00:00")},Ws=(e,t)=>e.name.toLowerCase().localeCompare(t.name.toLowerCase()),an=(e,t)=>Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)),Fs=(e,t,n)=>e.geo===t.geo?0:e.geo?t.geo?n?an(e.geo,n)-an(t.geo,n):0:-1:1,Vs={priority:(e,t)=>Hs(e,t)||Oe(e,t)||Ge(e,t),standby:(e,t)=>Oe(e,t)||Ge(e,t),soonest:(e,t)=>Ge(e,t)||Oe(e,t),nearby:(e,t,n)=>Fs(e,t,n),aToZ:()=>0},js=new Map([["priority",{text:"Priority"}],["nearby",{text:"Nearby"}],["standby",{text:"Standby"}],["soonest",{text:"Soonest"}],["aToZ",{text:"A to Z"}]]);function Ys(e,t){const{n,s:r,e:a,w:s}=e.geo,[c,d]=t;return c<n&&c>r&&d<a&&d>s}function Ks(){const{park:e}=te(),{experiences:t}=ft(),[n,r]=zs(),[a,s]=I("priority");D(()=>{a==="nearby"&&r()},[t,a,r]);const c=(o,l)=>{var f,u;return Number((f=l==null?void 0:l.flex)==null?void 0:f.available)-Number((u=o==null?void 0:o.flex)==null?void 0:u.available)||Vs[a==="nearby"&&!(n&&Ys(e,n))?"priority":a](o,l,n)||Ws(o,l)},d=W(o=>i(gi,{...o,options:js,selected:a,onChange:s,title:"Sort By"}),[a]);return{sorter:c,SortSelect:d}}const Qs=30,Js=60,on="bg1.genie.tipBoard.starred",Qe="Lightning Pick",Je="Upcoming Drop",qe="Booked",cn=e=>e.experienced&&!e.starred;function qs({contentRef:e}){ms();const{goTo:t}=$(),n=F(),{park:r}=te(),{experiences:a,refreshExperiences:s,loaderElem:c}=ft(),{sorter:d,SortSelect:o}=Ks(),l=B(),[f,u]=I(()=>{const v=JSON.parse(localStorage.getItem(on)||"[]");return new Set(Array.isArray(v)?v:[])}),m=V(!0);D(()=>{var v;m.current?m.current=!1:(v=e.current)==null||v.scroll(0,0)},[o,e]);function h({id:v}){u(T=>(T=new Set(T),T.has(v)?T.delete(v):T.add(v),localStorage.setItem(on,JSON.stringify([...T])),T))}const _=n.nextDropTime(r),y=()=>t(i(Xs,{})),S=()=>t(i(ea,{dropTime:_,park:r})),p=()=>t(i(ta,{})),k=v=>i("li",{className:"pb-3 first:border-0 border-t-4 border-gray-300",children:[i("div",{className:"flex items-center gap-x-2 mt-2",children:[i(Zs,{experience:v,toggleStar:h}),i("h3",{className:"flex-1 mt-0 text-lg font-semibold leading-tight truncate",children:v.name}),v.lp?i(Ue,{name:Qe,icon:Ke,onClick:y}):_&&v.drop?i(Ue,{name:Je,icon:Zt,onClick:S}):null,v.flex.preexistingPlan&&i(Ue,{name:qe,icon:qt,onClick:p})]}),i("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[i($s,{experience:v}),i(Ls,{experience:v})]})]},v.id+(v.starred?"*":"")),E=Ie(P().time),g=a.filter(v=>!!v.flex).map(v=>{var Z;const T=v.standby.waitTime||0,A=(Z=v==null?void 0:v.flex)==null?void 0:Z.nextAvailableTime;return{...v,lp:!!A&&T>=Qs&&Ie(A)-E<=Math.min(Js,(4-Math.trunc(v.priority||4))/3*T),starred:f.has(v.id)}}).sort((v,T)=>+!v.starred-+!T.starred||+!v.lp-+!T.lp||d(v,T)),w=g.filter(v=>!cn(v)),b=g.filter(cn).sort((v,T)=>v.name.localeCompare(T.name));return i(ht,{heading:"Genie+",buttons:i(N,{children:[i(o,{}),i(yi,{}),i(Re,{name:"Experiences",onClick:s})]}),contentRef:e,children:[i(si,{}),i(Gs,{bookTime:n.nextBookTime,dropTime:_}),i("ul",{"data-testid":"unexperienced",children:w.map(k)}),b.length>0&&i(N,{children:[i("h2",{className:`-mx-3 px-3 py-1 text-sm uppercase text-center ${l.bg} text-white`,children:"Previously Experienced"}),i("ul",{"data-testid":"experienced",children:b.map(k)})]}),g.length>0&&i(_i,{children:[i(re,{sym:i(Ke,{className:l.text}),def:Qe,onInfo:y}),i(re,{sym:i(Zt,{className:l.text}),def:Je,onInfo:S}),i(re,{sym:i(qt,{className:l.text}),def:qe,onInfo:p})]}),c]})}function Ue({name:e,icon:t,onClick:n}){const r=B();return i("button",{title:`${e} (more info)`,className:`-mx-2 px-2 ${r.text}`,onClick:n,children:i(t,{})})}function Zs({experience:e,toggleStar:t}){const n=B();return i("button",{title:`${e.starred?"Remove from":"Add to"} Favorites`,className:"-m-2 p-2",onClick:()=>t(e),children:i(hs,{className:e.starred?n.text:"text-gray-300"})})}function Xs(){return i(M,{heading:Qe,children:i("p",{children:"When an attraction with a long standby wait has a Lightning Lane return time in the near future, it's highlighted as a Lightning Pick. Book these quick before they're gone!"})})}function ea({dropTime:e,park:t}){const n=F(),{bg:r}=B();return i(M,{heading:Je,children:[i("p",{children:["This attraction may be part of the"," ",e?i("time",{dateTime:e,className:"font-semibold",children:j(e)}):"next"," ","drop of additional Lightning Lane inventory, with earlier return times than what's currently being offered. Availability varies but is always limited, so be sure you're ready to book when the drop time arrives!"]}),n.upcomingDrops(t).map(a=>i(ii,{heading:j(a.time),experiences:a.experiences,bg:r},a.time))]})}function ta(){return i(M,{heading:qe,children:i("p",{children:"You currently have a Lightning Lane reservation for this attraction."})})}/**
 * Exit icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function na(e){return i(z,{...e,children:i("path",{d:"M12 10v-2h-5v-2h5v-2l3 3zM11 9v4h-5v3l-6-3v-13h11v5h-1v-4h-8l4 2v9h4v-3z"})})}/**
 * News icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ia(e){return i(z,{...e,children:i("path",{d:"M14 4v-2h-14v11c0 0.552 0.448 1 1 1h13.5c0.828 0 1.5-0.672 1.5-1.5v-8.5h-2zM13 13h-12v-10h12v10zM2 5h10v1h-10zM8 7h4v1h-4zM8 9h4v1h-4zM8 11h3v1h-3zM2 7h5v5h-5z"})})}/**
 * Cog icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function ra(e){return i(z,{...e,children:i("path",{d:"M14.59 9.535c-0.839-1.454-0.335-3.317 1.127-4.164l-1.572-2.723c-0.449 0.263-0.972 0.414-1.529 0.414-1.68 0-3.042-1.371-3.042-3.062h-3.145c0.004 0.522-0.126 1.051-0.406 1.535-0.839 1.454-2.706 1.948-4.17 1.106l-1.572 2.723c0.453 0.257 0.845 0.634 1.123 1.117 0.838 1.452 0.336 3.311-1.12 4.16l1.572 2.723c0.448-0.261 0.967-0.41 1.522-0.41 1.675 0 3.033 1.362 3.042 3.046h3.145c-0.001-0.517 0.129-1.040 0.406-1.519 0.838-1.452 2.7-1.947 4.163-1.11l1.572-2.723c-0.45-0.257-0.839-0.633-1.116-1.113zM8 11.24c-1.789 0-3.24-1.45-3.24-3.24s1.45-3.24 3.24-3.24c1.789 0 3.24 1.45 3.24 3.24s-1.45 3.24-3.24 3.24z"})})}/**
 * User icon from [IcoMoon]{@link https://icomoon.io/#icons-icomoon}
 * @license CC-BY-4.0
 */function sa(e){return i(z,{...e,children:i("path",{d:"M9 11.041v-0.825c1.102-0.621 2-2.168 2-3.716 0-2.485 0-4.5-3-4.5s-3 2.015-3 4.5c0 1.548 0.898 3.095 2 3.716v0.825c-3.392 0.277-6 1.944-6 3.959h14c0-2.015-2.608-3.682-6-3.959z"})})}function aa(){const{goTo:e}=$(),t=F(),[n]=I([{text:"Party Selection",icon:i(sa,{}),action:()=>e(i(ps,{}))},{text:"Log Out",icon:i(na,{}),action:()=>t.logOut()},{text:"BG1 News",icon:i(ia,{}),action:()=>e(i(Fn,{}))}]),[r,a]=I(!1),s=V(null);return i(N,{children:[i("button",{className:"absolute top-0 right-0 h-full px-4",onClick:()=>a(!0),title:"Settings Menu",children:i(ra,{})}),r&&i(ut,{onClick:c=>{var d;(d=s.current)!=null&&d.contains(c.target)||a(!1)},"data-testid":"shade",children:i("ul",{className:"overflow-auto min-w-[50%] max-h-[90%] rounded-lg bg-white text-black text-lg font-normal",ref:s,children:n.map(c=>i("li",{className:"border-t-2 first:border-0 border-gray-300",children:i("button",{className:"flex flex-row items-center w-full px-4 py-3",onClick:()=>{a(!1),setTimeout(c.action,50)},children:[i("span",{className:"mr-2.5 text-gray-700","aria-hidden":!0,children:c.icon}),c.text]})},c.text))})})]})}function wi(e){const[t,n]=e.split(":").map(Number);return t*60+n}const oa=(e,t)=>wi(e)-t;function ln({park:e,onSelect:t}){const n=De(),{loadData:r,loaderElem:a}=Y(),[s,c]=I();D(()=>{r(async()=>{const o=await n.experiences(e);c(o.filter(l=>l.available&&!!l.nextAvailableTime).sort((l,f)=>l.name.localeCompare(f.name)))})},[e,n,r]);const d=[{heading:"Attractions",type:"ATTRACTION"},{heading:"Characters",type:"CHARACTER"},{heading:"Entertainment",type:"ENTERTAINMENT"}];return i(M,{heading:"Select Experience",theme:e.theme,children:[s?s.length===0?i("p",{children:"No DAS experiences available"}):i(N,{children:d.map(o=>i(ca,{park:e,experiences:s.filter(l=>l.type===o.type),heading:o.heading,onSelect:t},o.type))}):null,a]})}function ca({park:e,experiences:t,heading:n,onSelect:r}){if(t.length===0)return null;const a=wi(P().time);return i("div",{className:`mt-4 rounded overflow-hidden ${e.theme.bg}`,children:[i("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:n}),i("ul",{className:"bg-white bg-opacity-90 leading-snug",children:t.map(s=>i("li",{className:"flex items-center pt-3 last:pb-3",children:[i("div",{className:"flex-1 px-2",children:s.name}),i("div",{className:"px-2",children:i(R,{onClick:()=>r(s),children:i("span",{className:"min-w-[4rem]",children:[oa(s.nextAvailableTime,a)," ",i("abbr",{title:"minutes",children:"min."})]})})})]},s.id))})]})}function dn({park:e,party:t}){const{goTo:n,goBack:r}=$(),a=De(),{refreshPlans:s}=ae(),[c,d]=I(),[o,l]=I(new Set(t)),[f,u]=I({}),{loadData:m,loaderElem:h}=Y();async function _(){c&&m(async()=>{try{const y=await a.book({park:e,experience:c,guests:[...o]});s(),mt("D"),await r({screen:me}),n(i(fe,{booking:y,isNew:!0}))}catch(y){throw y instanceof Ve&&u(y.conflicts),y}},{messages:{[Ve.name]:"Some guests not eligible",[Ln.name]:"Experience currently unavailable"}})}return i(M,{heading:"DAS Selection",theme:e.theme,children:[i("h3",{children:"Experience"}),c?i("div",{className:"flex items-center mt-3",children:[i("div",{className:"text-lg font-semibold truncate",children:c.name}),i("div",{className:"ml-3",children:i(R,{type:"small",onClick:()=>n(i(ln,{park:e,onSelect:y=>{d(y),r()}})),children:"Modify"})})]}):i("div",{className:"mt-3 text-center",children:i(R,{onClick:()=>n(i(ln,{park:e,onSelect:y=>{d(y),r()}})),children:"Select Experience"})}),i("h3",{children:"DAS Guest"}),i(O,{guests:t.slice(0,1),conflicts:f}),t.length>1&&i(N,{children:[i("h3",{children:"Additional Guests"}),i(O,{guests:t.slice(1),selectable:{isSelected:y=>o.has(y),onToggle:y=>{o.has(y)?o.delete(y):o.add(y),l(new Set(o))}},conflicts:f})]}),i(H,{disabled:!t||!c,onClick:_,children:"Request Return Time"}),h]})}function la({parties:e}){const{goTo:t}=$(),{park:n}=te(),{plans:r,refreshPlans:a,loaderElem:s}=ae();tt(a,[a]);const c=new Set(e.map(u=>u[0]).map(u=>u.id)),d=r.filter(u=>u.type==="DAS"&&u.subtype==="IN_PARK"),o=new Map(d.filter(u=>u.type==="DAS"&&u.subtype==="IN_PARK").map(u=>{var m;return[((m=u.guests.find(h=>c.has(h.id)))==null?void 0:m.id)??"",u]}));if(!s&&e.length===1){const u=e[0],m=o.get(u[0].id);return m?i(fe,{booking:m}):i(dn,{park:n,party:u})}const l=e.filter(u=>!(o!=null&&o.has(u[0].id))),f=e.filter(u=>o==null?void 0:o.has(u[0].id));return i(M,{heading:`DAS ${e.length===1?"Selection":"Parties"}`,theme:n.theme,children:s||(e.length>0?i(N,{children:[l.length>0&&i(N,{children:[i("h3",{children:"Select Next Experience"}),i("ul",{className:"mt-2",children:l.map(u=>i("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[i("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:u[0].avatarImageUrl?i("img",{src:u[0].avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):u[0].name[0]}),i("span",{className:"flex-1 leading-tight",children:u[0].name}),i(R,{type:"small",onClick:()=>t(i(dn,{park:n,party:u})),children:"Select"})]},u[0].id))})]}),f.length>0&&i(N,{children:[i("h3",{children:"Current Selection"}),i("ul",{className:"mt-2",children:f.map(u=>{const m=o.get(u[0].id);return i("li",{className:"flex items-center gap-x-3 pl-3 py-1",children:[i("span",{className:"flex-shrink-0 w-[48px] h-[48px] leading-[48px] rounded-full text-3xl font-bold text-center bg-gray-400 text-white","aria-hidden":"true",children:u[0].avatarImageUrl?i("img",{src:u[0].avatarImageUrl,alt:"",width:"48",height:"48",className:"rounded-full"}):u[0].name[0]}),i("div",{className:"flex-1",children:[i("div",{children:u[0].name}),m&&i("div",{className:"text-gray-500 text-xs font-semibold uppercase",children:[m.name," @"," ",i(q,{time:m.start.time})]})]}),i(R,{type:"small",onClick:()=>{m&&t(i(fe,{booking:m}))},children:"Details"})]},u[0].id)})})]})]}):i("div",{}))})}function da({contentRef:e}){const{goTo:t}=$(),{experiences:n,refreshExperiences:r,loaderElem:a}=ft(),s=jn(),c=o=>t(i(ua,{exp:o})),d=new Map;return n.filter(o=>o.standby.available||o.individual||o.standby.unavailableReason==="TEMPORARILY_DOWN").sort((o,l)=>o.land.sort-l.land.sort||(o.sort||1/0)-(l.sort||1/0)||o.name.localeCompare(l.name)).forEach(o=>{var l,f;d.has(o.land)||d.set(o.land,{ATTRACTION:[],ENTERTAINMENT:[],CHARACTER:[],HOLIDAY:[]}),(f=(l=d.get(o.land))==null?void 0:l[o.type])==null||f.push(o)}),i(ht,{heading:"Times Guide",buttons:i(N,{children:[s.length>0&&i(R,{title:"Disability Access Service",onClick:()=>t(i(la,{parties:s})),children:"DAS"}),i(yi,{}),i(Re,{name:"Times",onClick:r})]}),contentRef:e,children:[[...d].map(([o,l])=>i("div",{children:[i("h2",{className:`pr-1 ${o.theme.text} text-sm font-semibold text-right uppercase`,children:o.name}),i("div",{className:"rounded overflow-hidden",children:[i(be,{title:"Attractions",land:o,experiences:l.ATTRACTION,onInfoClick:c}),i(be,{title:"Entertainment",land:o,experiences:l.ENTERTAINMENT,onInfoClick:c}),i(be,{title:"Holiday Entertainment",land:o,experiences:l.HOLIDAY,onInfoClick:c}),i(be,{title:"Characters",land:o,experiences:l.CHARACTER,onInfoClick:c})]})]},o.name)),n.length>0&&i(_i,{children:[i(re,{sym:"*",def:"No listed wait/show time"}),i(re,{sym:"\u274C",def:"Temporarily down"}),i(re,{sym:"VQ",def:"Virtual queue"})]}),a]})}function be({title:e,land:t,experiences:n,onInfoClick:r}){return n.length===0?null:i("div",{className:`${t.theme.bg}`,"data-testid":`${t.name}-${e}`,children:[i("h3",{className:"mt-0 py-1 text-white text-xs font-semibold text-center uppercase",children:e}),i("table",{className:"w-full leading-snug",children:i("tbody",{children:n.map(a=>{var s;return i("tr",{className:"group",children:[i("td",{className:`${a.standby.displayNextShowTime?"min-w-[5.625rem]":"min-w-[2.75rem]"} px-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-80 font-bold text-center uppercase whitespace-nowrap`,children:a.standby.displayNextShowTime?(((s=a.displayAdditionalShowTimes)==null?void 0:s.length)??0)>0?i("button",{onClick:()=>r(a),className:"underline",children:a.standby.displayNextShowTime}):a.standby.displayNextShowTime:a.standby.available?a.standby.waitTime??"*":a.virtualQueue&&a.standby.unavailableReason==="NOT_STANDBY_ENABLED"?"VQ":"\u274C"}),i("td",{className:"w-full px-1 pl-2 py-0.5 group-first:pt-1 group-last:pb-1 bg-white bg-opacity-90",children:i("div",{className:"flex items-center gap-x-2",children:[i("div",{className:"flex-1",children:a.name}),(a==null?void 0:a.individual)&&i("div",{className:`${t.theme.text} text-xs leading-tight font-semibold text-center uppercase`,children:[i("div",{children:[i("abbr",{title:"Individual Lightning Lane",children:"ILL"}),"\u200A: "+a.individual.displayPrice]}),a.individual.nextAvailableTime&&i("div",{children:j(a.individual.nextAvailableTime)})]})]})})]},a.id)})})})]})}const ua=({exp:e})=>{var t;return i(M,{heading:"Experience Info",children:[i("h2",{children:e.name}),i("div",{children:e.park.name}),i("h3",{children:["Upcoming ",e.type==="CHARACTER"?"Appearances":"Shows"]}),i("ul",{className:"list-disc mt-2 pl-6",children:[!!e.standby.displayNextShowTime&&i("li",{children:e.standby.displayNextShowTime}),(t=e.displayAdditionalShowTimes)==null?void 0:t.map(n=>i("li",{children:n},n))]})]})},un=6e4,ki="bg1.genie.merlock.tab",ha=()=>localStorage.getItem(ki)??"Genie+",fa=[{name:"Genie+",icon:i(Ke,{}),component:qs},{name:"Times",icon:i(us,{}),component:da},{name:"Plans",icon:i(ni,{}),component:hi}],ma=i(aa,{}),Ni=as({tabs:fa,footer:ma},({tab:e})=>{const{current:t}=ot(),n=ne(),{park:r}=te(),a=ds(),{refreshExperiences:s}=a,{refreshPlans:c}=ae(),d=V(null);return D(()=>{localStorage.setItem(ki,e.name)},[e]),D(()=>lt(()=>{t.type===Ni&&(s(un),c(un))}),[t,s,c]),D(()=>{var o;n.current&&((o=d.current)==null||o.scroll(0,0))},[n]),i(Wn,{value:r.theme,children:i(ls,{value:a,children:i(e.component,{contentRef:d})})})}),me=Ni;function pa(){return i(jr,{value:Yr(),children:i(ts,{value:ns(),children:i(is,{value:rs(),children:i(Kr,{value:Qr(),children:i(zn,{children:i(me,{tabName:ha()})})})})})})}function Si({queue:e,screen:t}){const{current:n}=ot(),{resort:r}=Ae();return e.isAcceptingJoins||n.type!==t?null:i(pi,{resort:r,time:e.nextScheduledOpenTime,label:"Next queue opening"})}function yt({queue:e,heading:t,children:n}){var r;return i(M,{heading:t,theme:(r=e.park)==null?void 0:r.theme,children:[i("h2",{children:e.name}),n]})}const _a=5e3;function ga({queue:e,guests:t,result:n}){const{boardingGroup:r,conflicts:a}=n,s=r!==null,c=t.filter(u=>!(u.id in a)),d=t.filter(u=>u.id in a),{goBack:o}=$(),[l,f]=I(!1);return D(()=>{s&&setTimeout(()=>f(!0),_a)},[s]),i(yt,{queue:e,heading:"Boarding Group",children:s?i(N,{children:[i("h3",{children:"Congratulations! \u{1F389}"}),i("p",{children:"You joined the virtual queue!"}),i("p",{className:"text-lg font-semibold",children:["Boarding Group: ",r]}),i(O,{guests:c}),Object.keys(a).length>0&&i(N,{children:[i("p",{className:"font-semibold",children:"These guests could not join:"}),i(O,{guests:d,conflicts:a})]}),i("p",{children:"Refer to the My Disney Experience app for return time and other information."}),l&&i(H,{onClick:()=>o({screen:vt}),children:"Done"})]}):i(N,{children:[i("h3",{children:"Sorry!"}),i("p",{children:"A boarding group could not be obtained. Go back and try again."}),i(O,{guests:d,conflicts:a})]})})}function Ei({queue:e,guests:t}){const{goTo:n}=$(),r=at(),{loadData:a,loaderElem:s}=Y();async function c(){await a(async d=>{if(!e||!(await r.getQueue(e)).isAcceptingJoins){d("Queue not open yet");return}const o=await r.joinQueue(e,t);n(i(ga,{queue:e,guests:t,result:o}),{replace:!0}),o.boardingGroup!==null&&mt("V")},{minLoadTime:999})}return i(yt,{queue:e,heading:"Join Virtual Queue",children:[i(Si,{queue:e,screen:Ei}),i("h3",{children:"Your Party"}),i(O,{guests:t}),i(H,{onClick:c,children:"Join Virtual Queue"}),s]})}function Ii({queue:e}){const{goTo:t}=$(),n=at(),{loadData:r,loaderElem:a,flash:s}=Y(),[c,d]=I([]),[o,l]=I(new Set);D(()=>{r(async()=>{const u=await n.getLinkedGuests(e);d(u),l(new Set(u.filter(m=>m.preselected)))})},[e,n,r]);function f(u){const m=new Set(o);m[m.has(u)?"delete":"add"](u);const h=Number(e==null?void 0:e.maxPartySize);h>0&&m.size>h?s(`Maximum party size: ${h}`):(l(m),s(""))}return i(yt,{queue:e,heading:"Choose Your Party",children:[e.howToEnterMessage.split(`

`).map((u,m)=>i("p",{children:u},m)),i(Si,{queue:e,screen:Ii}),i("h3",{children:"Choose Your Party"}),c.length>0?i(O,{guests:c,selectable:{isSelected:u=>o.has(u),onToggle:f}}):i("p",{children:"No guests available"}),i(H,{disabled:o.size===0,onClick:()=>t(i(Ei,{queue:e,guests:[...o]})),children:"Confirm Party"}),a]})}const hn=e=>e.categoryContentId==="attraction",ce=e=>e.isAcceptingPartyCreation||e.isAcceptingJoins;function vt(){const e=at(),{goTo:t,goBack:n}=$(),r=B(),{loadData:a,loaderElem:s}=Y(),[c,d]=I([]),[o,l]=I(!1),[,f]=I(),u=W(()=>{a(async()=>{const m=await e.getQueues();m.sort((h,_)=>+ce(_)-+ce(h)||+hn(_)-+hn(h)),d(m),f(h=>{if(!h)return h;const _=m.find(y=>y.id===h.id);if(_&&ce(_))return h;f(void 0),n({screen:vt})}),l(!0)})},[e,n,a]);return D(()=>(u(),lt(u)),[u]),i(M,{heading:"Virtual Queues",buttons:i(R,{title:"Refresh Queues",onClick:u,children:i(dt,{})}),footer:i("div",{className:"p-2 text-right",children:i(R,{className:`bg-opacity-90 bg-white ${r.text}`,onClick:()=>e.logOut(),children:"Log Out"})}),children:[c.length>0?i("ul",{className:"mt-1",children:c.map(m=>i("li",{className:"py-3 first:border-0 border-t-4 border-gray-300",children:[i("h2",{className:"mt-0",children:m.name}),i("div",{className:"flex items-center mt-2",children:[i("div",{className:"flex-1",children:m.isAcceptingJoins?i("span",{children:"Available now"}):m.nextScheduledOpenTime?i(N,{children:["Next opening:"," ",i("time",{dateTime:m.nextScheduledOpenTime,className:"font-semibold",children:j(m.nextScheduledOpenTime)})]}):"No more openings today"}),i("div",{className:"pl-3",children:i(R,{disabled:!ce(m),onClick:()=>{f(m),t(i(Ii,{queue:m}))},children:ce(m)?"Join Queue":"Closed"})})]})]},m.id))}):o&&!s?i("p",{className:"text-gray-500 font-semibold text-center uppercase",children:"No virtual queues found"}):null,s]})}function ya(){return i(zn,{children:i(vt,{})})}class va{constructor(t){C(this,"data");C(this,"cachedShowtimes",{});this.data=t}async shows(t){Object.keys(this.cachedShowtimes).length===0&&(this.cachedShowtimes=(await this.request("showtimes")).data);const n=this.cachedShowtimes[t.id]??{},{time:r}=P();return Object.fromEntries(Object.entries(n).filter(([a])=>a in this.data.experiences).map(([a,s])=>{const c=s.filter(u=>u>=r).map(u=>j(u)),d=c[0],o=c.slice(1),l=d!==void 0,f=l?void 0:"NO_MORE_SHOWS";return[a,{type:"ENTERTAINMENT",...this.data.experiences[a],park:t,standby:{available:l,unavailableReason:f,displayNextShowTime:d},displayAdditionalShowTimes:o}]}))}async request(t){const n=await rt(`https://bg1.joelface.com/livedata/${this.data.resort.toLowerCase()}/${t}.json`);if(!n.ok)throw new Error("Fetch failed");return n}}const ba=0;function xa(){document.body.addEventListener("click",()=>null)}function wa({authStore:e}){const[t,n]=I(),[r,a]=I(i("div",{})),s=Ur(),c=zr(ba),[d,o]=I(()=>{try{e.getData()}catch(l){if(!(l instanceof Dn))throw l;return!0}return!1});return D(()=>{xa()},[]),D(()=>{e.onUnauthorized=()=>o(!0);for(const[l,f]of[[Ft,pa],[je,ya]])try{const u=l.originToResort(origin);n(u),ir({WDW:"America/New_York",DLR:"America/Los_Angeles"}[u]),vr(u).then(m=>{a(i(Cr,{value:m,children:i(os,{value:new va(m),children:i(Tr,{value:new Ft(m,e),children:i(Ir,{value:new pr(m,e),children:i(Pr,{value:new je(m,e),children:i(f,{})})})})})}))});return}catch(u){if(!(u instanceof An))throw u}location.href="https://joelface.github.io/bg1/start.html"},[e]),D(()=>{function l(){if(!d)try{e.getData(),o(!1)}catch{o(!0)}}return l(),lt(l)},[e,d]),s||c||d&&t&&i(Vr,{resort:t,onLogin:l=>{e.setData(l),o(!1)}})||r}Ti();function Ti(){if(!document.body){setTimeout(Ti,100);return}ka(),Na().render(i(wa,{authStore:new ar("bg1.auth")}))}function ka(){const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",document.head.appendChild(e)}function Na(){return nr(document.body.appendChild(document.createElement("div")))}
